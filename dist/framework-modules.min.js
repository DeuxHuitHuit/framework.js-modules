/*! framework.js-modules - v1.6.0 - build 358 - 2018-03-16
 * https://github.com/DeuxHuitHuit/framework.js-modules
 * Copyright (c) 2018 Deux Huit Huit (https://deuxhuithuit.com/);
 * MIT */
!function(a,b,c){"use strict";App.components.exports("algolia-search",function(b){var c,d,e,f,g,h=document.location.protocol+"//"+document.location.host,i=a("html").attr("lang"),j=0,k=function(a){return{title:a.title,url:a.url.replace(h,"")}},l={inputSelector:".js-algolia-input",resultsCtnSelector:".js-algolia-results-ctn",resultsContentSelector:".js-algolia-results-content",noResultsTemplateSelector:".js-algolia-no-results-template",resultsItemTemplateSelector:".js-algolia-results-item-template",algoliaAttributesToRetrieve:"title,url,image",algoliaAttributesToHighlight:"title",resultsTemplateStringSelector:".js-algolia-results-template-string",facetsAttr:"data-algolia-facets",facetFiltersAttr:"data-algolia-facet-filters",onCreateResultsTemplatingObject:k,defaultResultsTemplateString:'<div><a href="__url__">__title__</a></div>',defaultFacets:"lang",defaultFacetFilters:"lang:"+i,searchCallback:a.noop,clearCallback:a.noop,beforeSearchCallback:a.noop,gaCat:"Search",gaAction:"search",gaTimer:1e3,_templateSettings:{interpolate:/__(.+?)__/g,evaluate:/_%([\s\S]+?)%_/g,escape:/_%-([\s\S]+?)%_/g},algolia:{app:"",key:"",index:""}},m=a.extend({},l,b),n=function(b,c){a.sendEvent(m.gaCat,m.gaAction,b,c)},o=function(a){var b=a.find(m.resultsContentSelector),c=a.find(m.noResultsTemplateSelector).length?a.find(m.noResultsTemplateSelector).html():"";b.append(c)},p=function(b,c,d,e,f){var g=b.find(m.resultsContentSelector);if(f||g.empty(),!c){if(d.nbHits){var h=b.find(m.resultsItemTemplateSelector).length?b.find(m.resultsItemTemplateSelector).text():m.defaultResultsTemplateString,i=_.templateSettings;_.templateSettings=m._templateSettings;var k=_.template(h);a.each(d.hits,function(){var a=this,b=m.onCreateResultsTemplatingObject(a),c=k(b);g.append(c)}),_.templateSettings=i}else e&&e.length>2&&o(b);clearTimeout(j),j=setTimeout(function(){n(e,d?d.nbHits||0:0)},m.gaTimer)}App.callback(m.searchCallback,[b,c,d,m,e])},q=function(b,c){var d=f.val(),h=parseInt(b)?parseInt(b):0;App.callback(m.beforeSearchCallback,[{resultsCtn:g}]),g.each(function(){var b=a(this),f=b.attr(m.facetsAttr)?b.attr(m.facetsAttr):m.defaultFacets,g=b.attr(m.facetFiltersAttr)?b.attr(m.facetFiltersAttr):m.defaultFacetFilters;e.search(d,{facets:f,facetFilters:g,attributesToRetrieve:m.algoliaAttributesToRetrieve,attributesToHighlight:m.algoliaAttributesToHighlight,page:h},function(a,e){p(b,a,e,d,c)})})},r=function(){g.each(function(){var b=a(this).find(m.resultsContentSelector);b.empty()}),App.callback(m.clearCallback,[g,m])},s=function(){var a=f.val();a.length>2?q():r()},t=function(b){c=a(b),f=c.find(m.inputSelector),g=c.find(m.resultsCtnSelector),d=window.algoliasearch(m.algolia.app,m.algolia.key),e=d.initIndex(m.algolia.index),f.on("keyup",s)};return{init:t,search:q,updateInputVal:function(a){f.val(a)},getVal:function(){return f.val()},clear:r}})}(jQuery,jQuery(window)),function(a,b,c,d){"use strict";var e=function(a,b,c,d){if(a.length){var e=a.closest(c.containerSelector);e.css({minHeight:a.height()+"px"}),a.fadeTo(500,0,function(){a.hide(),d(a,b,c)})}else d(a,b,c)},f=function(a,b,c){var d=b.closest(c.containerSelector);c.scrollToTop&&App.mediator.notify("window.scrollTop",{animated:!1}),App.mediator.notify("articleChanger.entering"),b.fadeTo(500,1,function(){c.articleEnter(a,b,c),d.css({minHeight:""})})},g=function(a,b,c,d){var e=d.findArticle(b,c,d);return e.hide(),a.append(e),e},h=function(b,c,d){c=c||"";var e=d.articleSelector+(d.trackHandle?'[data-handle="'+c+'"]':"");return a(e,a(b))},i={articleSelector:".js-article",containerSelector:".js-article-ctn",findArticle:h,appendArticle:g,startAnimToArticle:e,endAnimToArticle:f,trackHandle:!0,twoStepAnim:!1,scrollToTop:!1,articleEnter:function(a,b,c){c.trackHandle||a.remove(),App.mediator.notify("articleChanger.enter",{item:b,article:b})}};App.components.exports("articleChanger",function(){var b,c,d,e,f=!1,g=!1,h="",j=function(a,b,c){g=!1,f||c.endAnimToArticle(a,b,c)},k=function(f,g){c=f,b=a.extend({},i,g),d=a(b.containerSelector,c),e=b.startPageHandle},l="",m=function(a,i){var k=b.findArticle(d,e,b);l=i||document.location.href;var m=function(c,e,i){if(f=!1,l===h){var m=b.appendArticle(d,c,a,b),o=document.location,p=o.href.substring(o.hostname.length+o.protocol.length+2);App.mediator.notify("pageLoad.end"),App.mediator.notify("articleChanger.loaded",{url:p,data:c}),m.length?b.twoStepAnim&&!g?b.endAnimToArticle(k,m,b):b.startAnimToArticle(k,m,b,j):App.log({args:"Could not find new article",fx:"error",me:"Article Changer"})}else n()},n=function(){f||(App.mediator.notify("pageLoad.start",{page:c}),f=!0,h=l,Loader.load({url:l,priority:0,vip:!0,success:m,progress:function(a){var b=a.originalEvent.total,c=a.originalEvent.loaded,d=b>0?c/b:0;App.mediator.notify("pageLoad.progress",{event:a,total:b,loaded:c,percent:d})},error:function(){App.mediator.notify("article.loaderror"),App.mediator.notify("pageLoad.end"),f=!1},giveup:function(a){App.mediator.notify("pageLoad.end"),f=!1}}))};if(!b.trackHandle||e!==a){var o;b.trackHandle&&(o=b.findArticle(d,a,b)),o&&o.length?b.startAnimToArticle(k,o,b,j):(b.twoStepAnim&&(g=!0,b.startAnimToArticle(k,o,b,j)),n()),e=a}};return{init:k,clear:function(){e=""},navigateTo:m}})}(jQuery,window,document),function(a,b,c,d){"use strict";var e=function(a,b,c){if(a.length){var d=a.closest(c.containerSelector);d.css({minHeight:a.height()+"px"}),a.fadeTo(500,0,function(){a.hide(),c.scrollToTop&&App.mediator.notify("window.scrollTop",{animated:!1}),App.mediator.notify("articleChanger.entering",{article:b,ctn:d}),b.fadeTo(500,1,function(){d.css({minHeight:""})}),setTimeout(function(){c.articleEnter(a,b,c)},100)})}else b.fadeTo(500,1),c.articleEnter(a,b,c)},f=function(a,b,c,d){var e=d.findArticle(b,c,d);return e.hide(),a.append(e),e},g=function(b,c,d){c=c||"";var e=d.articleSelector+(d.trackHandle?'[data-handle="'+c+'"]':"");return a(e,a(b))},h={articleSelector:".js-article",containerSelector:".js-article-ctn",findArticle:g,appendArticle:f,animToArticle:e,trackHandle:!0,scrollToTop:!1,articleEnter:function(a,b,c){c.trackHandle||a.remove(),App.mediator.notify("articleChanger.enter",{article:b})}};App.components.exports("articleChanger",function(){var b,c,d,e,f=function(f,g){c=f,b=a.extend({},h,g),d=a(b.containerSelector,c),e=b.startPageHandle},g=function(a,f){var g=b.findArticle(d,e,b),h=f||document.location.href,i=function(c,e,f){var h=b.appendArticle(d,c,a,b),i=document.location,j=i.href.substring(i.hostname.length+i.protocol.length+2);App.mediator.notify("pageLoad.end"),App.mediator.notify("articleChanger.loaded",{url:j,data:c}),h.length?b.animToArticle(g,h,b):App.log({args:"Could not find new article",fx:"error",me:"Article Changer"})};if(!b.trackHandle||e!==a){var j;b.trackHandle&&(j=b.findArticle(d,a,b)),j&&j.length?b.animToArticle(g,j,b):(App.mediator.notify("pageLoad.start",{page:c}),Loader.load({url:h,priority:0,vip:!0,success:i,progress:function(a){var b=a.originalEvent.total,c=a.originalEvent.loaded,d=b>0?c/b:0;App.mediator.notify("pageLoad.progress",{event:a,total:b,loaded:c,percent:d})},error:function(){App.mediator.notify("article.loaderror"),App.mediator.notify("pageLoad.end")},giveup:function(a){App.mediator.notify("pageLoad.end")}})),e=a}};return{init:f,clear:function(){e=""},navigateTo:g}})}(jQuery,window,document),function(a,b,c){"use strict";var d={checkPoints:[0,25,50,75,90,100],category:"Scroll",action:"scroll"};a("body");App.components.exports("checkpoint-event",function(b){var c=a.extend({},d,b),e=0,f=function(b){if(a.isNumeric(c.checkPoints[e])&&a.isNumeric(b)&&c.checkPoints[e]<=b){var d=c.action+" "+c.checkPoints[e]+"%",f=c.label||d;a.sendEvent(c.category,d,f,c.checkPoints[e]),e++}},g=function(){e=0},h=function(){g()};return{init:h,track:f,reset:g}})}(jQuery,jQuery(window)),function(a,b,c){"use strict";App.components.exports("flickity",function(b){var c=a(),d=a(),e=!1,f={sliderCtn:".js-flickity-slider-ctn",cellSelector:".js-flickity-cell",navBtnSelector:".js-flickity-nav-btn",abortedClass:"is-flickity-cancelled",initedClass:"is-flickity-inited",selectedClass:"is-selected",seenClass:"is-seen",dataAttrPrefix:"flickity"},g=a.extend({},f,b),h=function(){var b={},d=new RegExp("^"+g.dataAttrPrefix);return b=_.reduce(c.data(),function(a,b,c){if(d.test(c)){if(_.isObject(b))return a;var e=c.replace(d,""),f="";e&&e[0]&&(f=e[0].toLowerCase(),e.length>=2&&(f+=e.substr(1)),a[f]=b)}return a},{}),a.extend({},g,b)},i=function(){c.flickity("resize")},j=function(){var b=c.data("flickity").selectedIndex;c.find(g.cellSelector+":eq("+b+")").addClass(g.seenClass),c.find(g.cellSelector+"."+g.seenClass).each(function(){c.find(".flickity-page-dots li:eq("+a(this).index()+")").addClass(g.seenClass)})},k=function(a,b){if(c=a,d=b,c.find(g.cellSelector).length>1){var f=h();c.flickity(f),c.flickity("resize"),c.addClass(g.initedClass),e=!0,f.pageDots&&c.on("settle.flickity",j),c.find("img[data-src-format]").jitImage(),App.callback(g.inited)}else c.find(1==g.cellSelector.length)&&(c.addClass(g.abortedClass),c.find(g.cellSelector).addClass(g.selectedClass),App.callback(g.aborted))},l=function(){c.hasClass(g.initedClass)&&c.closest("body").length>0&&(c.flickity("destroy"),c.removeClass(g.initedClass),c.off("settle.flickity",j),c=a(),App.callback(g.destroyed))};return{init:k,resize:i,destroy:l,isInited:function(){return e}}})}(jQuery,jQuery(window)),function(a,b,c,d,e){"use strict";var f={container:".js-form-field",input:".js-form-input",error:".js-form-error",label:".js-form-label",states:".js-form-state",clear:".js-form-clear",preview:".js-form-preview",progress:".js-form-progress",validationEvents:"blur change",emptinessEvents:"blur keyup change",previewEvents:"change input",formatEvents:"blur",changeLabelTextToFilename:!0,onlyShowFirstError:!1,group:null,rules:{required:{presence:!0},email:{email:!0},money:{numericality:{onlyInteger:!1,greaterThan:0}},integer:{numericality:{onlyInteger:!0,greaterThan:0}},document:{format:{pattern:"^.+\\.(?:docx?|pdf)$",flags:"i"}},image:{format:{pattern:"^.+\\.(?:jpe?g|png)$",flags:"i"}},phoneUs:{format:{pattern:"\\(?[0-9]{3}\\)?[- ]?([0-9]{3})[- ]?([0-9]{4})",flags:"i"}},url:{url:!0},embed:{format:{pattern:"^http(.+)(youtube\\.com|youtu\\.be|vimeo\\.com|facebook\\.com)(.+)$",flags:"i"}}},rulesOptions:{},formatters:{}},g=null;window.moment?g={rules:{over18Now:{datetime:{dateOnly:!0,earliest:window.moment.utc().subtract(150,"years"),latest:window.moment.utc().subtract(18,"years")}}}}:App.log("com::form-field: Extended date rules are not available. Add Moment.js to enable them."),App.components.exports("form-field",function(c){var d,e,h,i,j,k,l,m,n=[];c=a.extend(!0,{},f,g,c);var o=function(a){return{error:a.attr("data-error-class"),valid:a.attr("data-valid-class"),empty:a.attr("data-empty-class"),notEmpty:a.attr("data-not-empty-class"),submitting:a.attr("data-submitting-class")}},p=function(a){return a.attr("data-state-class")},q=function(a,b){var c=j.filter('[data-state="'+b+'"]');c[a](p(c))},r=function(a){a?e.enable():e.disable()},s=function(){e.focus()},t=function(d,e){if(d.empty(),c.changeLabelTextToFilename&&(e&&e.name?i.text(e.name):i.text(i.attr("data-text"))),e&&b.FileReader){var f=new b.FileReader;f.onload=function(b){var c=b.target.result;if(c){var e=a("<img />").attr("class",d.attr("data-preview-class")).attr("src",c).on("error",function(){e.remove()});d.append(e)}},f.readAsDataURL(e)}},u=function(){var a=o(e),b=o(d),f=o(i);e.removeClass(a.error),e.removeClass(a.valid),e.addClass(a.empty),e.removeClass(a.notEmpty),d.removeClass(b.error),d.removeClass(b.valid),d.addClass(b.empty),d.removeClass(b.notEmpty),i.removeClass(f.error),i.removeClass(f.valid),i.addClass(f.empty),i.removeClass(f.notEmpty),h.empty().removeClass(p(h)),q("removeClass","error"),q("removeClass","valid"),"file"==e.attr("type")&&(c.changeLabelTextToFilename&&i.text(i.attr("data-text")),t(d.find(c.preview),null))},v=function(){var a;if("checkbox"==e.attr("type"))a=e.prop("checked")?"true":"";else if("radio"==e.attr("type")){var b=e.closest("form").find("input[type='radio'][name='"+e.attr("name")+"']:checked");a=b.length?b.prop("checked")?b.val():"":e.prop("checked")?e.val():""}else if(e.hasClass("js-form-field-radio-list")){var c=e.find("input[type='radio']:checked");a=c.prop("checked")?c.val():""}else a=e.val();return a},w=function(){var a=b.validate.isEmpty(v()),c=a?"addClass":"removeClass",f=a?"removeClass":"addClass",g=o(e),h=o(d),j=o(i);e[c](g.empty),e[f](g.notEmpty),d[c](h.empty),d[f](h.notEmpty),i[c](j.empty),i[f](j.notEmpty)},x=function(a){var b=d.find(c.preview);if("file"==e.attr("type")&&(w(),b.length)){var f=!!a&&!!a.target.files&&a.target.files[0];f=f||e[0].files&&e[0].files[0],t(b,f)}},y=function(d){try{var e={},f={};return _.each(n,function(b){c.rules[b]&&(e=a.extend(e,c.rules[b])),c.rulesOptions[b]&&(f=a.extend(f,c.rulesOptions[b]))}),b.validate.single(d,e,f)}catch(a){App.log({fx:"error",args:[a]})}return!1},z=function(){_.each(n,function(a){c.formatters[a]&&c.formatters[a](e,m)})},A=function(){var a=y(v()),b=a?"addClass":"removeClass",f=a?"removeClass":"addClass",g=a?c.onlyShowFirstError?a[0]:a.join("<br />"):"",j=o(e),k=o(d),l=o(i);return e[b](j.error),e[f](j.valid),d[b](k.error),d[f](k.valid),i[b](l.error),i[f](l.valid),h.html(g),a?(h.addClass(p(h)),q("addClass","error"),q("removeClass","valid"),{result:a,field:m}):(h.removeClass(p(h)),q("addClass","valid"),q("removeClass","error"),a)},B=function(a){var b=a?"addClass":"removeClass",c=o(e);e[b](c.submitting)},C=function(b){c=a.extend(!0,c,b),d=a(c.container),e=d.find(c.input),h=d.find(c.error),i=d.find(c.label),j=d.find(c.states),k=d.find(c.clear),l=d.find(c.progress),n=_.filter((d.attr("data-rules")||"").split(/[|,\s]/g)),c.formatEvents&&e.on(c.formatEvents,z),c.validationEvents&&e.on(c.validationEvents,A),c.emptinessEvents&&e.on(c.emptinessEvents,w),c.previewEvents&&e.on(c.previewEvents,x),d.find("[selected]").length&&w()};return m={init:C,validate:A,format:z,enable:r,focus:s,reset:u,preview:x,checkEmptiness:w,group:function(){return c.group},submitting:B,value:v,name:function(){return e.attr("name")},label:function(){return i.text()},find:function(a){return d.is(a)?d:d.find(a)},hasClass:function(a){return d.hasClass(a)},required:function(){return!!~n.indexOf("required")}}})}(jQuery,window,document,window.moment),function(a,b,c,d,e){"use strict";var f={root:"body",container:".js-form",fields:".js-form-field",fieldsGroupSelector:".js-form-field-group",fieldsOptions:{},onSubmit:null,doSubmit:null,onValid:null,onError:null,disableOnSubmit:!0,focusOnError:!0,post:{},gaCat:"conversion",gaLabel:"form"};App.components.exports("form",function(c){var e,g=[],h=!1;c=a.extend(!0,{},f,c);var i=function(b,d,f){e.attr("data-ga-form-cat")||c.gaCat;d=d||e.attr("data-ga-form-label")||c.gaLabel,a.sendEvent("conversion",b,d,f)},j=function(){e[0].reset(),_.each(g,function(a){a.reset()})},k=function(){_.each(g,function(a){a.preview()})},l=function(){return _.map(g,function(a){return a.validate()})},m=function(a){return a=a||l(),!!a.length&&!_.some(a)||!a.length},n=function(b){var c=[];return a.each(g,function(){this.group().is(b)&&c.push(this)}),m(_.map(c,function(a){return a.validate()}))},o=function(a){_.each(g,function(b){b.enable(a)})},p=function(a){_.each(g,function(b){b.submitting(a)})},q=function(){var b={},d=!window.FormData;h||(d?a.each(e.serializeArray(),function(){b[this.name]=this.value}):b=new FormData(e[0]),h=!0,p(h),App.callback(c.post.submitting),window.Loader.load({url:e.attr("action"),type:e.attr("method")||"POST",data:b,processData:d,contentType:!1,dataType:"text",error:c.post.error,success:c.post.success,complete:function(){App.callback(c.post.complete),h=!1,p(h),c.disableOnSubmit&&o(!0)}}))},r=function(){var a=!0;return _.reduce(g,function(b,c){if(b)return a=c.isValid()},!0),a},s=function(a){var d=l();return App.callback(c.onSubmit),m(d)?(App.callback(c.onValid),c.post?q():App.callback(c.doSubmit),c.disableOnSubmit&&o(!1),c.post||c.doSubmit?b.pd(a):void 0):(App.callback(c.onError,{results:d}),c.focusOnError&&(d=_.filter(d),d.length&&d[0].field.focus()),b.pd(a))},t=function(b,d){d=a(d);var e=App.components.create("form-field",c.fieldsOptions),f=1===d.filter("[data-only-show-first-error]").length;e.init({container:d,group:d.closest(c.fieldsGroupSelector),onlyShowFirstError:f}),g.push(e)},u=function(f){c=a.extend(!0,c,f),c.root=a(c.root),e=c.root.find(c.container),e.find(c.fields).each(t),e.submit(s),c.focusOnFirst&&setTimeout(function(){g[0].focus()},100),b.validate.validators.presence.options={message:e.attr("data-msg-required")},b.validate.validators.email.options={message:e.attr("data-msg-email-invalid")||e.attr("data-msg-invalid")},b.validate.validators.format.options={message:e.attr("data-msg-invalid")},b.validate.validators.numericality.options={message:e.attr("data-msg-invalid")},b.validate.validators.url.options={message:e.attr("data-msg-invalid")};var h="DD-MM-YYYY";window.moment&&b.validate.extend(b.validate.validators.datetime,{parse:function(a,b){if(!a)return NaN;if(d.isMoment(a))return+a;if(/[^\d-\/]/.test(a))return NaN;var c=d.utc(a,h);return c.isValid()?+c:NaN},format:function(a,b){return d.isMoment(a)||(a=d(a)),a.format(h)},message:e.attr("data-msg-date-invalid")||e.attr("data-msg-invalid"),notValid:e.attr("data-msg-date-invalid")||e.attr("data-msg-invalid"),tooEarly:e.attr("data-msg-date-too-early")||e.attr("data-msg-invalid"),tooLate:e.attr("data-msg-date-too-late")||e.attr("data-msg-invalid")})};return{init:u,enable:o,validate:l,reset:j,preview:k,post:q,submitting:p,validateGroup:n,container:function(){return e},eachFields:function(a){return _.each(g,a)},getOptions:function(){return c},isValid:r,validators:function(){return b.validate.validators},track:i}})}(jQuery,window,document,window.moment),function(a,b,c,d){"use strict";App.components.exports("googleMap",function(b){var d,e,f,g=[],h=function(){f&&f.infowindow.close()},i={defaultMarkerOptions:{},mapTypeId:null,markerAction:function(){var a=new google.maps.LatLng(this.getPosition().lat()+.005,this.getPosition().lng());e.panTo(a),h(),this.infowindow.open(e,this),f=this},beforeCreate:null,afterCreate:null},j=a.extend({},i,b),k=function(b){var c=a.extend({},j.defaultMarkerOptions,b);c.iconImage&&(c.iconImage=new google.maps.MarkerImage(c.iconImage.src,new google.maps.Size(c.iconImage.size.width,c.iconImage.size.height),new google.maps.Point(c.iconImage.p1.x,c.iconImage.p1.y),new google.maps.Point(c.iconImage.p2.x,c.iconImage.p2.y))),c.position&&(c.LatLng=new google.maps.LatLng(c.position.latitude,c.position.longitude));var d=new google.maps.Marker({position:c.LatLng,map:e,icon:c.iconImage,shadow:c.iconShadow,zIndex:c.zIndex});g.push(d),c.content&&c.content.length?(d.infowindow=new google.maps.InfoWindow({content:c.content}),google.maps.event.addListener(d,"click",j.markerAction)):j.markerCustomAction&&google.maps.event.addListener(d,"click",j.markerCustomAction)},l=function(){App.callback(j.beforeCreate,[google.maps,j,d]),j.center&&(j.center=new google.maps.LatLng(j.center.latitude,j.center.longitude)),google.maps.MapTypeId[j.mapTypeId]?j.mapTypeId=google.maps.MapTypeId[j.mapTypeId]:j.mapTypeId=google.maps.MapTypeId.ROADMAP,e=new google.maps.Map(d.get(0),j),google.maps.event.addListener(e,"bounds_changed",function(){App.mediator.notifyCurrentPage("map.boundsChanged",e.getBounds())}),App.callback(j.afterCreate,[google.maps])},m=function(){return!!c.google&&!!google.maps&&!!google.maps.Map},n=function(){d.hasClass("map-loaded")||(l(),d.addClass("map-loaded"))},o=function(b,c){d=a(c,b),App.loaded(m,function(){n()})};return{init:o,addMarker:k,center:function(a,b){e.panTo(new google.maps.LatLng(a,b))},zoom:function(a){e.setZoom(a)},fitBounds:function(a){e.fitBounds(new google.maps.LatLngBounds(a.southwest,a.northeast))},closeAllPopup:h}})}(jQuery,jQuery(window),window),function(a,b,c){"use strict";App.components.exports("infinite-scroll",function(b){var c,d,e=a(window),f=e.height(),g={ctnSelector:".js-infinite-scroll-ctn",contentCtnSelector:".js-infinite-scroll-content",pagerLinkSelector:".js-infinite-scroll-pager-link",triggerPercentage:.5,callback:a.noop},h=a.extend({},g,b),i=function(b,c,e){var f=d.find(h.contentCtnSelector),g=a(b);f.length?f.append(g.find(h.contentCtnSelector+" > *")):d.append(g.find(h.ctnSelector+" > *")),d.find("img[data-src-format]").jitImage()},j=function(a){if(d.length){var b=d.find(h.pagerLinkSelector);if(b.length){var c=b.attr("href");b.remove(),App.mediator.notify("pageLoad.start"),window.Loader.load({url:c,success:function(b,e,f){i(b,e,f),App.modules.notify("page.replaceState",{title:document.title,url:c}),App.mediator.notify("infiniteScroll.pageLoaded",{data:b,ctn:d,url:c}),App.callback(a,[d,c,b,e,f,h]),App.mediator.notify("pageLoad.end")},progress:function(a){var b=a.originalEvent.total,c=a.originalEvent.loaded,d=b>0?c/b:0;App.mediator.notify("pageLoad.progress",{event:a,total:b,loaded:c,percent:d})},error:function(){App.mediator.notify("pageLoad.end")},giveup:function(a){App.mediator.notify("pageLoad.end")}})}}},k=function(){f=e.height()},l=function(){if(f=e.height(),d.length){var a=e.scrollTop(),b=a-(d.offset().top+d.height())+f,c=b/f;c>=-h.triggerPercentage&&c<=1&&j(h.callback)}},m=function(a,b){j(b.callback)},n=function(b,e){h=a.extend(h,e),c=b,d=c.find(h.ctnSelector)};return{init:n,resize:k,scroll:l,loadNextPage:m}})}(jQuery,jQuery(window)),function(a,b,c){"use strict";App.components.exports("jplayer",function(b){var c,d={playerSelector:".js-jplayer-player",playerContainerSelector:".js-jplayer-container",onReady:null,onTimeupdate:null,backgroundColor:"transparent",loop:!0,width:1920,height:1080,resize:!0},e=a.extend({},d,b),f=function(b){var c=b.width(),d=b.height(),f=b.find(e.playerSelector),g=a.sizing.aspectFill({width:c,height:d,preferWidth:!1},e.width/e.height);g.height=Math.ceil(g.height),g.width=Math.ceil(g.width);var h=a.positioning.autoPosition({position:"center",left:"left",top:"top"},a.size(c,d),g);f.size(g).css(h).data({size:g,position:h}),f.jPlayer("option",{size:g})},g=function(){c.find(e.playerContainerSelector).each(function(){f(a(this))})},h=function(b){var c=b.find(e.playerSelector);c.jPlayer({ready:function(){var c=a(this);c.jPlayer("setMedia",{webmv:b.attr("data-video-webm"),m4v:b.attr("data-video-mp4"),ogv:b.attr("data-video-ogv")}),e.resize&&f(b),App.callback(e.onReady,[b])},solution:"html",loop:e.loop,volume:0,supplied:"webmv, m4v, ogv",backgroundColor:e.backgroundColor,wmode:e.backgroundColor,size:{width:e.width,height:e.height},preload:e.preload||"none",play:function(a){App.mediator.notify("jplayer.play",{ctn:b})},timeupdate:function(a){var c=a.jPlayer.status;c.currentTime&&App.mediator.notify("jplayer.timeupdate",{status:c,ctn:b}),App.callback(e.onTimeupdate,[b,c])},ended:function(){App.callback(e.onEnded,[b])}})},i=function(){var b=c.find(e.playerContainerSelector);b.each(function(){var b=a(this);h(b)})},j=function(a){var b=a.find(e.playerSelector);b.jPlayer("destroy"),b.jPlayer("pauseOthers")},k=function(){c.find(e.playerContainerSelector).each(function(){var b=a(this);j(b),b.removeClass("video-loaded").closest(".video-loaded").removeClass("video-loaded")})},l=function(a){var b=a.find(e.playerSelector);b.jPlayer("pauseOthers"),b.jPlayer("play")},m=function(a){var b=a.find(e.playerSelector);b.jPlayer("pause")},n=function(a){var b=a.find(e.playerSelector);b.jPlayer("stop")},o=function(a,b){var c=a.find(e.playerSelector);c.jPlayer("volume",b)},p=function(b){c=a(b)};return{init:p,loadAllVideo:i,loadVideo:h,destroyVideo:j,destroyAllVideo:k,playVideo:l,pauseVideo:m,stopVideo:n,resizeVideo:f,resizeAllVideo:g,setVolume:o}})}(jQuery,jQuery(window)),function(a,b,c){"use strict";var d={embed:function(a,b){var c=parseInt(a.attr("data-autoplay"),10),d=parseInt(a.attr("data-loop"),10),e="1"===a.attr("data-rel")?1:0,f=a.attr("data-extra"),g=this.getIframe(b,c,d,e,f);return g.attr("width","100%"),g.attr("height","100%"),g.attr("frameborder","0"),g.attr("class",a.attr("data-player-class")),a.append(g),g},getIframe:function(b){return a('<iframe allowfullscreen="" />')},getTemplateContent:function(b){var c=b.find("script");return _.map(c.contents(),function(b){return a(b).text()}).join("")},play:a.noop,pause:a.noop,ready:a.noop,progress:a.noop,volume:a.noop,finish:a.noop,destroy:function(a){a.remove()}},e={abstractProvider:d};App.components.exports("oembed",function(b){var c=a(b.container),f=a(b.player),g=f.data("oembedId"),h=f.data("oembedProvider"),i=e[h],j=a();i||(App.log({args:["Provider `%s` not found.",i],me:"oEmbed",fx:"warn"}),i=d);var k=function(c){c=c||!1,j=i.embed(f,g,c.autoplay,c.loop),j=j||a();var d=App.components.create("checkpoint-event",{category:b.category||"Video",action:"view",label:h+": "+(f.attr("data-oembed-title")||g)});d.init(),i.ready(f,function(){f.addClass("loaded"),i.progress(f,function(a){d.track(a)}),c.finish&&i.finish(f,c.finish)})},l=function(a){i.volume(f,a)},m=function(){i.play(c)},n=function(){i&&g&&c.find("iframe").length&&i.pause(c)},o=function(){f.removeClass("loaded"),i.destroy(j)};return{load:k,play:m,pause:n,volume:l,destroy:o}}),App.modules.exports("oembed-providers",{actions:function(){return{oembed:{providers:{abstract:function(){return d},register:function(a,b){e[b.key]?App.log({args:["Provider `%s` already exists.",b.key],me:"oEmbed",fx:"error"}):e[b.key]=b.provider}}}}}})}(jQuery,jQuery(window)),function(a,b,c){"use strict";var d=a(window),e={itemSelector:".js-replace-state-on-scroll",container:"body",urlAttribute:"data-canonical-url",titleAttribute:"data-canonical-title",change:null,windowOffsetPercentage:.5};App.components.exports("replace-state-on-scroll",function(b){var c=a.extend({},e,b),f=a(),g=[],h=-1,i=d.height(),j=-1,k=function(){j=-1,h=-1},l=function(){i=d.height(),f=a(c.container).find(c.itemSelector),g=_.map(f,function(b){return b=a(b),{offset:b.offset(),url:b.attr(c.urlAttribute),title:b.attr(c.titleAttribute)}})},m=function(b){c=a.extend(c,b),k(),l()},n=function(){var b=d.scrollTop(),e=_.findLastIndex(g,function(a){return a.offset.top+i*c.windowOffsetPercentage<=b});if(e!==-1&&h!==e&&g[e]){var f=g[e].url,k=g[e].title;k&&(document.title=k),f&&(App.modules.notify("page.replaceState",{title:k||document.title,url:f}),App.callback(c.change,[h,e,f]),e>j&&a.sendPageView({page:f})),h=e,j=Math.max(j,e)}};return{init:m,scroll:n,update:l,reset:k}})}(jQuery,window),function(a,b,c,d){"use strict";"fr"==a("html").attr("lang")&&(jQuery.timeago.settings.strings={prefixAgo:"Publi√© il y a",prefixFromNow:"d'ici",seconds:"moins d'une minute",minute:"environ une minute",minutes:"environ %d minutes",hour:"une heure",hours:"%d heures",day:"un jour",days:"%d jours",month:"un mois",months:"%d mois",year:"un an",years:"%d ans"}),App.components.exports("timeAgo",function(){var b,c=2592e6,d=function(d){b=d,a("time.js-time-ago").each(function(b,d){var e=a(this),f=new Date(e.attr("datetime"));(new Date).getTime()-f.getTime()<c&&e.timeago()})};return{init:d}})}(jQuery,window,document),function(a,b,c,d){"use strict";var e={ctn:a(),video:null,videoSelector:".js-video",resizeContainerSelector:"",onTimeUpdate:a.noop,onCanPlay:a.noop,onPlaying:a.noop,resizable:!0,onLoaded:a.noop,onEnded:a.noop},f="data-video-reset-on-end";!function(a){var b=function(b){return function(){var c=Array.prototype.slice.call(arguments);return a(this).each(function(d,e){e&&a.isFunction(e[b])&&e[b].apply(e,c)})}},c=function(b){return function(c){if(c===d){var e=a(this).get(0);return e?e[b]||0:0}return a(this).each(function(d,e){e&&(a(e).get(0)[b]=c)})}};a.fn.mediaPlay=b("play"),a.fn.mediaPause=b("pause"),a.fn.mediaLoad=b("load"),a.fn.mediaCurrentTime=c("currentTime"),a.fn.mediaPaused=c("paused"),a.fn.mediaMuted=c("muted"),a.fn.mediaHeight=c("videoHeight"),a.fn.mediaWidth=c("videoWidth")}(a),App.components.exports("video",function(b){var c=a.extend({},e,b),d=function(){if(c.resizable){var b=c.video.closest(c.resizeContainerSelector).length?c.video.closest(c.resizeContainerSelector):c.ctn,d=b.width(),e=b.height(),f=c.video.mediaWidth()/c.video.mediaHeight(),g=a.sizing.aspectFill({width:d,height:e,preferWidth:!1},f);g.height=Math.ceil(g.height),g.width=Math.ceil(g.width);var h=a.positioning.autoPosition({position:"center",left:"left",top:"top"},a.size(d,e),g);c.video.size(g).css(h).data({size:g,position:h})}},g=function(a){status.currentTime&&App.mediator.notify("video.timeupdate",{video:c.video,e:a}),App.callback(c.onTimeupdate,[c.video])},h=function(a){App.modules.notify("changeState.update",{item:c.ctn,state:"paused",action:"off"}),App.modules.notify("changeState.update",{item:c.ctn,state:"playing",action:"on"}),App.callback(c.onPlaying,[c.ctn,c.video])},i=function(a){d(),App.modules.notify("changeState.update",{item:c.ctn,state:"paused",action:"off"}),App.modules.notify("changeState.update",{item:c.ctn,state:"video-loaded",action:"on"}),App.callback(c.onCanPlay,[c.ctn,c.video])},j=function(a){d(),App.callback(c.onLoaded,[c.ctn,c.video])},k=function(){c.video.filter("["+f+"]").length&&App.modules.notify("changeState.update",{item:c.ctn,state:"playing",action:"off"}),App.callback(c.onEnded,[c.ctn,c.video])},l=function(){c.video.mediaLoad()},m=function(){c.video.mediaPlay()},n=function(){App.modules.notify("changeState.update",{item:c.ctn,state:"paused",action:"on"}),c.video.mediaPause()},o=function(a){c.video.mediaCurrentTime(a)},p=function(){c.video.mediaPaused()?m():n()},q=function(){c.video.off("timeUpdate",g).off("canplay",i).off("playing",h).off("ended",k).off("loadedmetadata",j),l(),c.video=null,c={}},r=function(b,d){c=a.extend({},c,d),c.ctn=a(b),c.video=b.find(c.videoSelector),c.video.on("timeupdate",g).on("canplay",i).on("playing",h).on("ended",k).on("loadedmetadata",j)};return{init:r,resize:d,destroy:q,load:l,play:m,togglePlay:p,pause:n,seek:o}})}(jQuery,window,jQuery(window)),function(a,b){"use strict";var c="#site a.js-alt-lg-link",d=(a(window),{}),e=function(){var b={};a("link[rel=alternate][hreflang]",document).each(function(){var c=a(this);b[c.attr("hreflang")]=c.attr("href")}),d[document.location.pathname]=b},f=function(b,c,e){if(c.data){var f={};if(a(c.data).each(function(b,c){if(a(c).is("link")){var d=a(c);d.attr("hreflang")&&(f[d.attr("hreflang")]=d.attr("href"))}if(a(c).is("body"))return!0}),d[c.url]=f,c.url.indexOf("?")!==-1){var g=c.url.split("?")[0];d[g]=f}}},g=function(b,e,f){d[document.location.pathname]&&a(c).each(function(){var b=a(this),c=d[document.location.pathname][b.data("lg")];c&&b.attr("href",c)})},h={pages:{loaded:f},page:{enter:g},articleChanger:{loaded:f,enter:g}};App.modules.exports("altLanguageLinkUpdater",{init:e,actions:function(){return h}})}(jQuery),function(a,b){"use strict";var c=a(window),d=a("#site"),e=0,f=0,g=0,h=".js-auto-3-state-on-scroll",i="data-auto-3-state-trigger",j="data-auto-3-state-trigger-common-ancestor",k="data-auto-3-state-trigger-bottom",l="data-auto-3-state-trigger-bottom-common-ancestor",m="data-auto-3-state-scroll-offset-top",n="3-state-fx",o=a(),p=function(a,b,c){if(b){var e=d,f=a.attr(c);return f&&(e=a.closest(f)),e.find(b)}return a},q=function(){o=d.find(h+"["+i+"]")},r=function(){o.each(function(){var b=a(this),c=b.data(n);b.removeData(n),App.callback(c)})},s=function(b){var c=0,e=d.find(b.attr(m));return e.each(function(){c+=Math.floor(a(this).outerHeight())}),c},t=function(){g=Math.floor(c.scrollTop()),o.each(function(){var b=a(this),c=Math.floor(b.outerHeight()),d=Math.floor(b.offset().top),e=(Math.floor(d+c),p(b,b.attr(i),j));if(e.length){var f=Math.floor(e.offset().top),h=b.attr(k)?p(b,b.attr(k),l):e,m=Math.floor(h.offset().top+h.outerHeight());if(c<m-f&&m>f){var o,q=f<=g+s(b),r=m-g<=c;o=r?function(){App.modules.notify("changeState.update",{item:b,state:"initial",action:"off"}),App.modules.notify("changeState.update",{item:b,state:"middle",action:"off"}),App.modules.notify("changeState.update",{item:b,state:"final",action:"on"})}:q?function(){App.modules.notify("changeState.update",{item:b,state:"initial",action:"off"}),App.modules.notify("changeState.update",{item:b,state:"final",action:"off"}),App.modules.notify("changeState.update",{
item:b,state:"middle",action:"on"})}:function(){App.modules.notify("changeState.update",{item:b,state:"final",action:"off"}),App.modules.notify("changeState.update",{item:b,state:"middle",action:"off"}),App.modules.notify("changeState.update",{item:b,state:"initial",action:"on"})},b.data(n,o)}}})},u=function(){t()},v=function(){window.craf(e),e=window.raf(function(){r()})},w=function(){window.craf(f),f=window.raf(function(){u(),v()})},x=function(a,b){q(),w()},y=function(){q(),w()},z=function(){},A=function(){return{site:{scroll:u,postscroll:v,resize:w},page:{enter:x},articleChanger:{enter:y}}};App.modules.exports("auto-3-state-on-scroll",{init:z,actions:A})}(jQuery),function(a,b){"use strict";var c=(a(window),a("#site")),d=".js-change-state-click",e="data-change-state-click-target",f="data-change-state-click",g="data-change-state-action",h="data-change-state-max-width",i="data-change-state-min-width",j="data-change-state-click-prevent-default",k="data-change-state-click-target-common-ancestor",l=function(a,b){if(b){var c=a,d=a.attr(k);return d&&(c=a.closest(d)),c.find(b)}return a},m=function(b){var c=a(this),d=c.attr(e),k=c.attr(f),m=c.attr(g),n=c.attr(i),o=c.attr(h),p=c,q=!!n&&window.mediaQueryMinWidth(n)||!n,r=!!o&&window.mediaQueryMaxWidth(o)||!o;if(k&&m&&q&&r&&(p=l(p,d),App.modules.notify("changeState.update",{item:p,state:k,action:m}),c.filter("["+j+"]").length))return window.pd(b)},n=function(){c.on(App.device.events.click,d,m)};App.modules.exports("auto-change-state-click",{init:n})}(jQuery),function(a,b){"use strict";var c=(a(window),a("#site")),d=".js-change-state-hover",e="data-change-state-hover",f="data-change-state-hover-target",g="data-change-state-hover-target-common-ancestor",h=function(a,b){if(b){var c=a,d=a.attr(g);return d&&(c=a.closest(d)),c.find(b)}return a},i=function(b){var c=a(this),d=c.attr(f),g=c.attr(e),i=c;return g&&(i=h(i,d),App.modules.notify("changeState.update",{item:i,state:g,action:"toggle"})),window.pd(b)},j=function(){c.on("mouseenter",d,i),c.on("mouseleave",d,i)};App.modules.exports("auto-change-state-on-hover",{init:j})}(jQuery),function(a,b){"use strict";var c=(a(window),a("#site")),d=!0,e=a(".page"),f=function(b,c,d,e,f){var g=a(d).find(".js-oembed-video-player");g.length&&App.modules.notify("pauseVideo",g)},g=function(b,c,d,e,f){if(!App.device.mobile){a(this).cycle("resume");var g=a(d).find(".js-oembed-video-ctn"),h=g.find(".js-oembed-video-player");h.hasClass("loaded")&&(g.removeClass("is-playing"),h.removeClass("loaded").empty())}},h=function(a){App.device.mobile||a.container.closest(".js-cycle").cycle("resume")},i=function(b){var c=a(this),d=c.closest(".js-oembed-video-ctn"),e=d.find(".js-oembed-video-player");return App.device.mobile||App.modules.notify("loadVideo",{player:e,autoplay:!0,finish:h}),d.addClass("is-playing"),App.device.mobile||c.closest(".js-cycle").cycle("pause"),window.pd(b)},j=function(){e.find(".js-cycle-slide.video .js-oembed-video-ctn").each(function(){var b=a(this),c=b.find(".js-oembed-video-player");App.modules.notify("loadVideo",{player:c,finish:h})})},k=function(b,c){e=a(c.page.key()),a(".js-cycle:not(.cycle-inited)").each(function(){var b=a(this);if(!b.data("cycle-disable-mobile")||!App.device.mobile){var c={slides:b.attr("data-cycle-slides")||">img",pager:b.attr("data-cycle-pager")||"> .cycle-pager",pagerTemplate:b.attr("data-cycle-pager-template")||"<span><span>",next:b.attr("data-cycle-next")||"> .cycle-next",prev:b.attr("data-cycle-prev")||"> .cycle-prev",timeout:parseInt(b.attr("data-cycle-timeout"),10)||4e3,paused:!!App.device.mobile||(b.attr("data-cycle-paused")||!1),pauseOnHover:b.attr("data-cycle-pause-on-hover")||!0,fx:b.attr("data-cycle-fx")||"fade",caption:b.attr("data-cycle-caption")||"> .cycle-caption",log:App.debug()};b.cycle(c),b.on("cycle-before",f),b.on("cycle-after",g),b.addClass("cycle-inited")}}),!d&&App.device.mobile&&j()},l=function(){d=!1,App.device.mobile&&j()},m=function(){c.on(App.device.events.click,".js-cycle-slide.video .js-oembed-video-play",i)},n=function(){return{site:{loaded:l},page:{enter:k},articleChanger:{enter:k}}};App.modules.exports("auto-cycle",{init:m,actions:n})}(jQuery),function(a,b){"use strict";var c=(a(window),a("#site"),a(".page")),d={sliderCtn:".js-auto-flickity-slider-ctn",cellCtn:".js-auto-flickity-ctn",cellSelector:".js-auto-flickity-cell",navBtnSelector:".js-auto-flickity-nav-btn",abortedClass:"is-flickity-cancelled",initedClass:"is-flickity-inited",selectedClass:"is-selected",imagesLoaded:!0},e=[],f=function(){a.each(e,function(){this.resize()})},g=function(){c.find(d.sliderCtn).find(d.cellCtn).not("."+d.initedClass).each(function(){var b=a(this),f=App.components.create("flickity",d);f.init(b,c),f.isInited()&&e.push(f)})},h=function(b,d){c=a(d.page.key()),g()},i=function(b,d){d&&d.canRemove&&(a.each(e,function(){this.destroy()}),e=[]),c=a()},j=function(){g()},k=function(){return{site:{resize:f},page:{enter:h,leaving:i},articleChanger:{entering:j}}};App.modules.exports("auto-flickity",{actions:k})}(jQuery),function(a,b){"use strict";var c=(a("#site"),{target:".js-recaptcha-response",trigger:".js-recaptcha",prefix:"g-recaptcha-"}),d=null,e=!1,f=0,g=function(){e&&d&&d.find(c.trigger).each(function(){var b=a(this);if(!b.attr("id")){var e=c.prefix+ ++f;b.attr("id",e),window.grecaptcha.render(e,{sitekey:b.attr("data-sitekey"),callback:function(a){d.find(c.target).val(a),App.mediator.notify("recaptcha.updated",{result:a,lastTarget:b})}})}})},h=function(b,c){c.page?d=a(c.page.key()):c.article&&(d=a(c.article)),g()},i=function(){window.GoogleReCaptchaCallback=function(){e=!0,g()}},j=function(){return{page:{enter:h},articleChanger:{enter:h}}};App.modules.exports("auto-invisible-recaptcha",{init:i,actions:j})}(jQuery),function(a,b,c){"use strict";var d=!0,e=a("#site"),f=function(b){var c=a(b.target);if(c.hasClass("jit-image-bg-src")){var d=c.closest(".jit-image-bg");d.css({backgroundImage:"url('"+c.attr("src")+"')"})}},g=function(b,c){a(c.article).find("img[data-src-format]").jitImage()},h=function(b,c){d||a(c.page.key()).find("img[data-src-format]").jitImage(),d=!1},i=function(){e.on("loaded.jitImage",f)},j=function(){return{page:{enter:h},articleChanger:{enter:g}}};App.modules.exports("auto-jit-image",{init:i,actions:j})}(jQuery,window),function(a,b,c){"use strict";var d=a("#site"),e=a(".page"),f=function(b){b.find("a[data-mailto]").each(function(){var b=a(this);b.attr("href","mailto:"+b.attr("data-mailto"))})},g=function(a,b){f(b.article)},h=function(b,c){e=a(c.page.key()),f(e)},i=function(){f(d)},j=function(){return{page:{enter:h},articleChanger:{enter:g}}};App.modules.exports("auto-mailto",{init:i,actions:j})}(jQuery,window),function(a,b){"use strict";var c=(a(window),a("#site")),d=(a(),".js-merge-qs-value-button"),e="data-merge-qs-value-key",f="data-merge-qs-value-remove-keys",g="data-merge-qs-value",h="data-merge-qs-value-prevent-default",i="data-merge-qs-value-toggle",j=function(b){var c=a(this),d=c.attr(e),j=c.attr(f),k=c.attr(g)||null,l=App.routing.querystring.parse(document.location.search);if(d){if(c.filter("["+i+"]").length?l[d]&&l[d]==k?l[d]=null:l[d]=k:k?l[d]=k:l[d]=null,j){var m=j.split(",");a.each(m,function(a,b){l[b]=null})}if(App.mediator.notify("page.updateQsFragment",{qs:l,raiseFragmentChanged:!0}),c.filter("["+h+"]").length)return window.pd(b,!0)}},k=function(){c.on(App.device.events.click,d,j)};App.modules.exports("auto-merge-qs-value",{init:k})}(jQuery),function(a,b){"use strict";var c=(a(window),a("#site")),d=".js-auto-modal-btn",e="data-auto-modal-common-ancestor",f="data-auto-modal-popup-selector",g="data-inner-scroll-selector",h=function(a,b){var c=b?"removeScroll":"addScroll";App.modules.notify("site."+c)},i=function(b){var d=a(this),i=d.closest(d.attr(e)),j=i.length?i:c,k=j.find(d.attr(f));return k.length?App.modules.notify("popup.toggle",{popup:k,openCallback:function(){h(k,!0)},closeCallback:function(){k.find(k.attr(g)).scrollTop(0),h(k,!1)}}):App.log("auto-modal: No popup found with selector : "+d.attr(f)),window.pd(b)},j=function(){c.on(a.click,d,i)};App.modules.exports("auto-modal",{init:j})}(jQuery),function(a,b,c){"use strict";var d=(a(window),a("#site")),e=a(),f=[],g=!0,h=".js-auto-oembed-play",i=".js-auto-oembed-player",j=".js-auto-oembed-ctn",k="auto-oembed",l=function(b){b.find(j).each(function(){var b=a(this),c=(b.find(i),b.data(k));App.modules.notify("changeState.update",{item:b,state:"playing",action:"off"}),c&&c.destroy(),b.data(k,null)})},m=function(a,b){var c=a.find(i),d=c.attr("data-autoload");if(!b){if(App.device.mobile&&"mobile"!==d&&"all"!==d)return;if(!App.device.mobile&&"none"===d)return}var e=a.data(k)||App.components.create("oembed",{container:a,player:c});return a.data(k,e),f.push(e),e.load({finish:function(){App.modules.notify("changeState.update",{item:a,state:"playing",action:"off"})}}),e},n=function(b){var c=b.is(j)?b:b.find(j);c.each(function(){m(a(this))})},o=function(a){var b=a.data();b&&b.autoOembed&&b.autoOembed.pause()},p=function(b){var c=b.is(j)?b:b.find(j);c.each(function(){o(a(this))})},q=function(a,b){b&&b.item&&p(b.item)},r=function(c){var d=a(this),e="true"===d.attr("data-auto-oembed-pause-other-on-play"),f=d.closest(j),g=f.data(k);return e&&p(a("#site")),g?(App.modules.notify("changeState.update",{item:f,state:"playing",action:"on"}),g.play()):g=m(f,!0),b.pd(c)},s=function(b,c){e=a(c.page.key()),g||n(e)},t=function(){l(e),e=a(),f=[]},u=function(){g=!1,n(d)},v=function(a,b){b.ctn&&n(b.ctn)},w=function(a,b){l(e),b.article&&n(b.article)},x=function(){d.on(App.device.events.click,h,r)},y=function(){return{page:{enter:s,leaving:t},site:{loaded:u},infiniteScroll:{pageLoaded:v},articleChanger:{enter:w},autoOembed:{pauseAll:q}}};App.modules.exports("auto-oembed",{init:x,actions:y})}(jQuery,window),function(a,b){"use strict";var c,d,e=(a(window),function(){return a("> .page:visible",d)}),f=function(a){if(!a)return 1;var b=a.toString().split(/[:\/]/i);return b.length?1===b.length?parseFloat(b[0]):2===b.length?parseInt(b[0],10)/(parseInt(b[1],10)||1):-1:1},g=function(){App.mediator.notifyCurrentPage("autoRatio.resizeCompleted")},h=function(b,c){b.each(function(){var b,c=a(this),d=f(c.attr("data-auto-ratio")),e=c.attr("data-auto-ratio-property")||"height";b="width"==e||"max-width"==e?c.height():c.width(),b=~~Math.floor(b/d),c.css(e,b+"px"),a("img[data-src-format]",c).jitImage()}),App.callback(c)},i=function(){h(a("*[data-auto-ratio]",e()),g)},j=function(){i()},k=function(a,b){b&&b.elements?h(b.elements,b.callback?b.callback:g):i()},l=function(){c=a("#site"),d=a("#site-pages",c),i()},m=function(){return{site:{resize:i},page:{enter:j},autoRatioSize:{update:k},articleChanger:{enter:j}}};App.modules.exports("auto-ratio-size",{init:l,actions:m})}(jQuery),function(a,b){"use strict";var c=a(window),d=0,e=function(){return a(".page:visible")},f={all:!0,desktop:!App.device.mobile,tablette:App.device.tablet,mobile:App.device.mobile,phone:a.phone},g=function(b){var c=0;if(b){var d=b.split(",");a.each(d,function(b,d){c+=a(d).height()})}return c},h=function(b){var c=!1;if(b){var d=b.split(",");a.each(d,function(a,b){f[b]&&(c=!0)})}return c},i=function(){var b=a(this),d=b.attr("data-height-ratio")||1,e=b.attr("data-height-property")||"minHeight",f=g(b.attr("data-height-offset")),i=(c.height()-f)*d,j=h(b.attr("data-screen-height-platform")||"all"),k=b.attr("data-screen-height-min-width")||0,l=b.data("data-screen-height-use-media-query")||!0,m=b.attr("data-screen-height-jitimage")||!0;j&&!l&&c.width()>k?b.css(e,i):j&&l&&window.matchMedia("(min-width: "+k+"px)").matches?b.css(e,i):b.css(e,""),m&&a("img[data-src-format]",b).jitImage()},j=function(b){var f=e();(App.device.mobile&&Math.abs(d-c.height())>120||!App.device.mobile)&&(f.filter(".js-auto-screen-height").add(a(".js-auto-screen-height",f)).each(i),d=c.height())},k=function(){d=0,j(),App.device.mobile&&(d=c.height()),setTimeout(j,100)},l=function(){j(),App.device.mobile&&(d=c.height())},m=function(){return{site:{resize:j},page:{enter:k},autoScreenHeight:{update:j},articleChanger:{entering:j}}};App.modules.exports("auto-screen-height",{init:l,actions:m})}(jQuery),function(a,b){"use strict";var c=(a(window),a("html")),d=a("#site"),e=!0,f=function(b,e){var f=document.location.href.split("#").length>1?document.location.href.split("#")[1]:"",g=f?d.find("#"+f):a(),h=e.noDuration?0:500;g.length&&c.velocity("scroll",{duration:h,offset:g.offset().top+"px",mobileHA:!1})},g=function(a,b){return e?void(e=!1):void f()},h=function(){return{page:{enter:g},articleChanger:{enter:f},siteLoader:{finishing:f}}};App.modules.exports("auto-scroll-to-id-on-load",{actions:h})}(jQuery),function(a,b){"use strict";var c=(a(window),a("#site")),d=function(b){var d=a(this),e=d.attr("href"),f=e.split("#")[1],g=null,h=a("html"),i=d.attr("data-scroll-to-id-offset-selector"),j=0,k=d.attr("data-scroll-to-id-scroll-ctn");if(k&&(g=d.closest(".page").find(k)),i){var l=a(i).eq(0);j=l.height()*-1}var m=c.find("#"+f);if(m.length)return j+=m.offset().top,h.velocity("scroll",{offset:j+"px",mobileHA:!1,container:g}),d.sendClickEvent({cat:d.attr("data-ga-cat")||"Scroll to top",event:b}),window.pd(b)},e=function(){c.on(App.device.events.click,".js-scroll-to-id-button",d)};App.modules.exports("auto-scroll-to-id",{init:e})}(jQuery),function(a,b){"use strict";var c=(a(window),a("#site"),function(){var a=document.location;return a.protocol+"//"+a.host+a.pathname}),d=function(a){App.modules.notify("shareThis.applyButton",{service:a.attr("data-share-service")||"sharethis",title:a.attr("data-share-title")||document.title,url:a.attr("data-share-url")||c(),type:a.attr("data-share-type")||"large",element:a.eq(0)[0]})},e=function(b,c){a(".js-share-this-btn").each(function(){d(a(this))})},f={articleChanger:{enter:e},page:{enter:e}};App.modules.exports("autoShareThis",{init:function(){},actions:function(){return f}})}(jQuery),function(a,b,c){"use strict";var d=(a(window),a("html"),".js-auto-slide-click"),e=".js-auto-slide-click-item",f=".js-auto-slide-click-trigger",g=".js-auto-slide-click-slide",h="auto-slide-click",i="data-auto-slide-click-max-width",j="data-auto-slide-click-min-width",k=function(b,c){var i=c.item.closest(e),j=c.item.closest(d),k=j.find(e).not(i);k.each(function(){var b=a(this),c=b.find(f),d=b.find(g);App.modules.notify("changeState.update",{item:c,state:h,action:"off"}),App.modules.notify("slide.update",{item:d,state:h,action:"up"})})},l=function(a,b){var c=b.trigger.closest(e),d=c.find(g),f=c.attr(j),k=c.attr(i),l=!!f&&window.mediaQueryMinWidth(f)||!f,m=!!k&&window.mediaQueryMaxWidth(k)||!k;l&&m&&(App.modules.notify("slide.update",{item:d,state:h,action:b.slideAction}),App.modules.notify("changeState.update",{item:b.trigger,state:h,action:b.triggerAction}))},m=function(b){var c=a(this);return l("",{trigger:c,triggerAction:"toggle",slideAction:"toggle"}),window.pd(b)},n=function(){a("#site").on(App.device.events.click,f,m)},o=function(){return{autoSlideClick:{toggleOn:k,updateSlideState:l}}};App.modules.exports("auto-slide-click",{init:n,actions:o})}(jQuery,window),function(a,b){"use strict";var c=(a(window),a("#site")),d=".js-auto-sync-property",e="data-sync-property",f="data-sync-property-with",g="data-sync-property-from",h="data-sync-property-from-common-ancestor",i="data-sync-property-aggregate",j=function(a,b){var c=0;return c="height"==b?Math.floor(parseFloat(window.getComputedStyle(a[0]).height)):"outerHeight-full"==b?a.outerHeight(!0):"outerWidth-full"==b?a.outerWidth(!0):a[b]()},k=function(b){var c=b.attr(e);if(c){var d=b.attr(g),k=b.attr(h),l=b.attr(f),m=b,n=null,o=b.attr(i);if(k&&(m=b.closest(k)),m.length&&(n=m.find(d)),l||(l=c),n.length){var p;"sum"==o?(p=0,n.each(function(){p+=j(a(this),l)})):p="min"==o?_.reduce(n,function(b,c){var d=j(a(c),l);return d<b?d:b},j(n.first(),l)):"max"==o?_.reduce(n,function(b,c){var d=j(a(c),l);return d>b?d:b},0):j(n.first(),l),b.css(c,p)}}},l=function(){c.find(d).each(function(b,c){var d=a(this);k(d)})},m=function(){l()},n=function(){l(),setTimeout(l,50)},o=function(){l()},p=function(){return{site:{resize:m},page:{enter:n},articleChanger:{enter:n}}};App.modules.exports("auto-sync-property",{init:o,actions:p})}(jQuery),function(a,b){"use strict";var c=(a(window),a("#site")),d=".js-auto-sync-state-from-qs",e="data-sync-state-from-qs",f=function(a,b,c){App.modules.notify("changeState.update",{item:a,state:b,action:c?"on":"off"})},g=function(b,c,d){var e=!1,g=App.routing.querystring.parse(document.location.search);a.each(d.split(","),function(a,b){var c=b.split("="),d=c[0],f=c[1];f.length?g[d]&&g[d]==f&&(e=!0):(g[d]&&0===g[d].length||!g[d])&&(e=!0)}),f(b,c,e)},h=function(){c.find(d).each(function(){var b=a(this),c=b.attr(e);if(c.length){var d=c.split(";");a.each(d,function(a,c){var d=c.split(":"),e=d[0],f=d[1];g(b,e,f)})}})},i=function(){h()},j=function(){h()},k=function(){return{page:{fragmentChanged:i}}};App.modules.exports("auto-sync-state-from-qs",{init:j,actions:k})}(jQuery),function(a,b,c){"use strict";var d=a(window),e=d.height(),f=a("html"),g=f.height(),h=a("#site"),i=a(),j=a(),k=".js-auto-toggle-class-on-scroll",l="data-toggle-class-on-scroll-",m=l+"add-before",n=l+"remove-before",o=l+"add-after",p=l+"remove-after",q=l+"ref-common-ancestor",r=l+"ref",s=l+"screen-offset",t=l+"scroll-ctn",u=l+"element-offset",v=function(){g=f.height(),i.each(function(){var b=a(this),c=b.attr(m),f=b.attr(n),i=b.attr(o),j=b.attr(p),k=a(b.attr(r));b.attr(q)&&(k=b.closest(b.attr(q)).find(b.attr(r)));var l=k.length?k:b,v=b.attr(s)||0,w=d;b.attr(t)&&(w=b.closest(".page").find(b.attr(t)));var x=w.scrollTop();if(l.length){var y=function(){b.addClass(c),b.removeClass(f),App.mediator.notify("autoToggleClassOnScroll.executed",{item:b,trigger:"before",addedClass:c,removeClass:f})},z=l.offset().top,A=e*v,B=0;b.attr(u)&&h.find(b.attr(u)).each(function(){B+=a(this).outerHeight()}),(z-A-B<x||!k.length&&0!==x&&x===g-e&&z>=x)&&(y=function(){b.addClass(i),b.removeClass(j),App.mediator.notify("autoToggleClassOnScroll.executed",{item:b,trigger:"after",addedClass:i,removeClass:j})}),b.data("autoToggleClassOnScroll",y)}})},w=null,x=function(){window.craf(w),w=window.raf(function(){i.each(function(){var b=a(this);App.callback(b.data("autoToggleClassOnScroll"))})})},y=function(){e=Math.max(1,d.height()),g=Math.max(1,f.height())},z=function(){y(),v(),x()},A=function(){i=h.find(k)},B=function(b,c){j=a(c.page.key()),A(),y(),setTimeout(z,500)},C=function(a,b){},D=function(){A(),v(),x()},E=function(){return{site:{scroll:v,postscroll:x,resize:z},page:{enter:B,leave:C},infiniteScroll:{pageLoaded:A},articleChanger:{enter:D},search:{complete:D}}};App.modules.exports("auto-toggle-class-on-scroll",{actions:E})}(jQuery,window),function(a,b,c){"use strict";var d=App.components.create("checkpoint-event",{category:"Lecture",checkPoints:[25,50,75,90,100]}),e=a(window),f=e.height(),g=a("body"),h=g.height(),i=h-f,j=function(){f=e.height(),h=g.height(),i=h-f},k=function(a,b){d.init(),App.callback(a),setTimeout(j,100)},l=function(a,b){d.reset(),App.callback(a)},m=function(){i>0&&d.track(e.scrollTop()/i*100)},n=function(){return{page:{enter:k,leave:l},site:{scroll:m,resize:j,loaded:j},articleChanger:{enter:k}}};App.modules.exports("auto-tracked-scroll",{actions:n})}(jQuery,window),function(a,b){"use strict";var c=(a(window),a("#site")),d=a(".page"),e=".js-auto-video",f=".js-auto-video-play",g=".js-auto-video-toggle-play",h=0,i=function(b,c){var d={},e=a.extend({},d,c),f=App.components.create("video",e);f.init(b),f.load(),b.data("autoVideoComponent",f)},j=function(b){b.find(e).each(function(){var b=a(this),c=b.data();c&&c.autoVideoComponent?c.autoVideoComponent.togglePlay():App.log("No auto-video-component found")})},k=function(){var b=a(this).closest(".js-auto-video-ctn");j(b)},l=function(b){b.find(e).each(function(){var b=a(this),c=b.data();if(c&&c.autoVideoComponent){var d=c.autoVideoComponent;d.resize(),d.play()}else App.log("No autoVideoComponent found")})},m=function(b){var d=c.find(g);d.off(a.click,k),d.on(a.click,k),b.find(e).each(function(){i(a(this))})},n=function(){window.craf(h),h=window.raf(function(){d.find(e).each(function(){var b=a(this).data();b&&b.autoVideoComponent&&b.autoVideoComponent.resize()})})},o=function(b,c){d=a(c.page.key()),m(d)},p=function(a,b){m(b.article)},q=function(b,c){c.canRemove&&d.find(e).each(function(){var b=a(this),c=(b.closest(".js-auto-video-ctn"),b.data());if(c&&c.autoVideoComponent){var d=c.autoVideoComponent;b.data("autoVideoComponent",null),d.destroy()}})},r=function(b){return l(a(this).closest(".js-auto-video-ctn")),window.pd(b)},s=function(){c.on(a.click,f,r)},t=function(){return{page:{enter:o,leaving:q},articleChanger:{enter:p},site:{resize:n},video:{resize:n}}};App.modules.exports("auto-video",{init:s,actions:t})}(jQuery),function(a,b){"use strict";a.fn.extend({blankLink:function(){a(this).each(function(){var b=a(this),c=b.attr("href");c&&(/^https?:\/\//.test(c)||/^\/workspace/.test(c))&&(b.attr("target")?!b.attr("rel")&&a.inArray(b.attr("target"),["_blank","_top"])&&b.attr("rel","noopener"):(b.attr("target","_blank"),b.attr("rel","noopener")))})}});var c=a(".page"),d=function(a){a.find("a").blankLink()},e=function(b,e,f){c=a(e.page.key()),d(c)},f=function(a,b){d(b.article)},g=function(){a("a").blankLink()},h={page:{enter:e},articleChanger:{enter:f}};App.modules.exports("blankLinkModule",{init:g,actions:function(){return h}})}(jQuery),function(a,b){"use strict";var c=(a(window),function(a){return!!a&&!!a.length&&"polygon"==a[0].nodeName||"polyline"==a[0].nodeName||"path"==a[0].nodeName||"g"==a[0].nodeName||"circle"==a[0].nodeName||"rect"==a[0].nodeName||"text"==a[0].nodeName}),d=function(b,d,e){var f="is-"+d,g=b.attr("data-"+d+"-state-add-class"),h=b.attr("data-"+d+"-state-rem-class"),i=b.attr("data-"+d+"-state-notify-on")||"",j=b.attr("data-"+d+"-state-notify-off")||"";e&&i.length?a.each(i.split(","),function(a,c){App.mediator.notify(c,{item:b,state:d,flag:e})}):!e&&j.length&&a.each(j.split(","),function(a,c){App.mediator.notify(c,{item:b,state:d,flag:e})});var k=function(){var c=[],d=b.attr("class").split(" "),i="",j=function(){var e=[];h&&(e=h.split(" ")),g&&c.push(g.split(" ")),c.push(f),a.each(d,function(a,b){e.indexOf(b)==-1&&c.push(b)}),a.each(c,function(a,b){i+=" "+b}),b.attr("class",i)},k=function(){var e=[];g&&(e=g.split(" ")),a.each(d,function(a,b){b!=f&&e.indexOf(b)==-1&&c.push(b)}),h&&c.push(h.split(" ")),a.each(c,function(a,b){i+=" "+b}),b.attr("class",i)};e?j():k()},l=function(){b[0].classList?e?(b[0].classList.add(g),b[0].classList.remove(h),b[0].classList.add(f)):(b[0].classList.remove(g),b[0].classList.add(h),b[0].classList.remove(f)):k()};c(b)?l():e?(b.addClass(g),b.removeClass(h),b.addClass(f)):(b.removeClass(g),b.addClass(h),b.removeClass(f))},e=function(b,c,f){var g=b.attr("data-"+c+"-state-follower-common-ancestor"),h=b.attr("data-"+c+"-state-follower"),i=b;g&&(i=b.closest(g));var j=i.find(h);App.modules.notify("changeState.begin",{item:b,state:c,flag:f}),d(b,c,f),j.each(function(){var b=a(this);e(b,c,f)}),App.modules.notify("changeState.end",{item:b,state:c,flag:f})},f=function(a,b,d,f){var g="is-"+b,h=a.hasClass(g);if(f=f?f:{},c(a))if(a[0].classList)h=a[0].classList.contains(g);else{var i=a.attr("class").split(" ");h=i.indexOf(g)!=-1}"toggle"==d?(e(a,b,!h),h?App.callback(f.off):App.callback(f.on)):"on"==d?h||(e(a,b,!0),App.callback(f.on)):"off"==d?h&&(e(a,b,!1),App.callback(f.off)):App.log("Action: "+d+" is not recognized: Actions available are : toggle, on or off")},g=function(a,b){if(b&&b.item&&b.state&&b.action){var c=b.item.attr("data-"+b.state+"-state-min-width"),d=b.item.attr("data-"+b.state+"-state-max-width"),e=!!c&&window.mediaQueryMinWidth(c)||!c,g=!!d&&window.mediaQueryMaxWidth(d)||!d;e&&g&&f(b.item,b.state,b.action,b.callbacks)}},h=function(){return{changeState:{update:g}}};App.modules.exports("change-state",{actions:h})}(jQuery),function(a,b,c){"use strict";var d='a[href^="/cdn-cgi/l/email-protection"]',e=/^\[email([\u0080-\u00FF ]+)protected\]$/i,f=function(a,c){var d,f,g="",h=parseInt(a.substr(0,2),16);if(h){for(d=2;d<a.length;d+=2)f=parseInt(a.substr(d,2),16)^h,g+=String.fromCharCode(f);c.attr("href","mailto:"+g),c.find("script").remove();var i=c.find(".__cf_email__");i.length&&(c=i),e.test(b.trim(c.text()))&&c.text(g)}},g=function(){a(d).each(function(b,c){try{c=a(c);var d=c.attr("data-cfemail");d||(d=c.attr("href").split("#")[1]),d&&d.indexOf("?")!==-1&&(d=d.split("?")[0]),d&&f(d,c)}catch(a){App.log(a)}})},h=function(){return{page:{enter:g},articleChanger:{enter:g}}};App.modules.exports("cloudflare-email",{actions:h})}(jQuery,window.s,window),function(a,b,c){"use strict";var d=function(){return{site:{loaded:function(){a("link[data-href]").each(function(){var b=a(this);b.attr("href",b.attr("data-href"))})}}}};App.modules.exports("defered-css",{actions:d})}(jQuery,window),function(a,b){"use strict";var c=function(b,c){c&&c.elem.find(".fb-comments").each(function(b,c){var d=a(c),e=d.width();e>100&&d.attr("data-width",e).find(">span>iframe, >span:first-child").width(e)})},d=function(b,d){window.FB&&window.FB.XFBML&&(d=d||{},window.FB.XFBML.parse(d.elem||document,function(){c(b,{elem:d.elem||a(".page:visible",App.root())})}))},e=function(){return{page:{enter:d},FB:{parse:d,resize:c},articleChanger:{enter:d},site:{loaded:d}}};App.modules.exports("FB",{actions:e})}(jQuery),function(a,b){"use strict";var c=function(a){return a.replace(/[a-z]+:\/\/([a-z0-9-_]+\.[a-z0-9-_:~\+#%&\?\/.=^>^<]+[^:\.,\)\s*$])/gi,function(a,b){return'<a title="'+a+'" href="'+a+'" target="_blank" rel="noopener">'+(b.length>36?b.substr(0,35)+"&hellip;":b)+"</a>"})},d=function(a){return a.replace(/(^|[^\w]+)\@([a-zA-Z0-9_√†√°√¢√£√§√•√ß√®√©√™√´√¨√≠√Æ√Ø√∞√≤√≥√¥√µ√∂√π√∫√ª√º√Ω√ø]{1,15}(\/[a-zA-Z0-9-_√†√°√¢√£√§√•√ß√®√©√™√´√¨√≠√Æ√Ø√∞√≤√≥√¥√µ√∂√π√∫√ª√º√Ω√ø]+)*)/gi,function(a,b,c){return b+'<a href="http://twitter.com/'+c+'" target="_blank" rel="noopener">@'+c+"</a>"})},e=function(a){return a.replace(/(^|[^&\w'"]+)\#([a-zA-Z0-9_√†√°√¢√£√§√•√ß√®√©√™√´√¨√≠√Æ√Ø√∞√≤√≥√¥√µ√∂√π√∫√ª√º√Ω√ø^"^<^>]+)/gi,function(a,b,c){return'"'===a.substr(-1)||"<"==a.substr(-1)?a:b+'<a href="https://twitter.com/search?q=%23'+c+'&src=hash" target="_blank rel="noopener"">#'+c+"</a>"})};window.formatTwitter=function(){var b=a(this),f=b.html();"true"!==b.attr("data-formattwitter")&&(f=c(f),f=d(f),f=e(f),b.html(f),b.attr("data-formattwitter","true"))}}(jQuery),function(a,b){"use strict";var c=a(document),d="keyboard-nav",e="keydown",f="tabindex",g=a("html"),h=function(a){g.removeClass(d),c.on(e,i),App.mediator.notify("keyboardNav.disabled")},i=function(a){a.which===window.keys.tab&&(g.addClass(d),c.off(e,i).one("click",h),App.mediator.notify("keyboardNav.enabled"))},j=function(){c.on(e,i)},k=function(a,b){b&&b.item&&b.item.is(".js-focusable")&&("after"===b.trigger?b.item.removeAttr(f):b.item.attr(f,"-1"))},l=function(){return{autoToggleClassOnScroll:{executed:k}}};App.modules.exports("keyboard-nav",{init:j,actions:l})}(jQuery),function(a,b){"use strict";var c=window.location,d=c.origin||c.protocol+"//"+c.hostname,e=new RegExp("^"+d,"i"),f=function(){var b=a("html"),c=b.attr("lang");if(!c)return null;var d=b.attr("data-all-langs");if(!d)return null;var e=function(a){return!!a&&a!==c},f=function(a){return new RegExp("^/"+a+"/.*$","i")};return _.map(_.filter(d.split(","),e),f)}(),g=function(a,c){if(!App.mediator._currentPage())return!0;var d=a.attr("href");return d===b||(!!/^(mailto|skype|tel|fax|ftps?|#)/im.test(d)||!(!c.metaKey&&!c.ctrlKey))},h=function(b){var c=a(this),d=c.attr("href"),h=function(a){return a.test(d)};return!!g(c,b)||(/^\?.+/.test(d)&&(d=window.location.pathname+d),e.test(d)&&(d=d.replace(e,"")),!(!f||!_.some(_.map(f,h)))||(App.mediator.notify("links.gotoClicked",{item:c,url:d}),App.mediator.goto(d),window.pd(b)))},i=function(b){var c=a(this),d=c.attr("href"),e=c.attr("data-toggle-fallback-url");return!!g(c,b)||(App.mediator.notify("links.toggleClicked",{item:c,url:d,fallback:e}),App.mediator.toggle(d,e),window.pd(b))},j=function(){var b=':not([href^="/workspace"])',c=':not([data-action="full"]):not([data-action="toggle"]):not([data-action="none"])',e='a[href^="'+d+'"]',f=':not(a[href^="'+d+'/workspace"])',g='[data-action="toggle"]',j='a[href^="/"]',k='a[href^="?"]',l=App.device.events.click;a("#site").on(l,j+b+c,h).on(l,k+b+c,h).on(l,e+c+f,h).on(l,j+g,i).on(l,k+g,i)};App.modules.exports("links",{init:j})}(jQuery),function(a,b,c){"use strict";var d=function(){return!!window.DM&&window.DM.player},e=function(){var b;App.modules.notify("oembed.providers.abstract",function(a,c){b=c});var e=a.extend({},b,{getIframe:function(b,e,f){App.loaded(d,function(d){var g=b.indexOf("/video/")>0?b.substring(b.indexOf("/video/")+7,b.indexOf("_")):b.substring(b.lastIndexOf("/")),h=a("<div/>");e=e!==c?e:1,f.append(h),this.playerInstance=d(h.get(0),{video:g,height:"100%",width:"100%",params:{autoplay:e,logo:0,info:0,background:"181818",highlight:"b4b4b4",api:1,html:1}})})},play:function(a){this.playerInstance.play()},pause:function(a){this.playerInstance.pause()}});App.modules.notify("oembed.providers.register",{key:"Dailymotion",provider:e})};App.modules.exports("oembed-dm",{init:e})}(jQuery,window),function(a,b,c){"use strict";var d=function(){return!!window.FB&&window.FB.XFBML},e=function(){var b;a("#fb-root").length||App.log({fx:"error",args:'The FB SDK requires <div id="fb-root"></div> in the body'}),App.modules.notify("oembed.providers.abstract",function(a,c){b=c});var c=a.extend({},b,{embed:function(a,b){App.loaded(d,function(b){b.parse(a.get(0)||document,function(){App.callback(c.ready)})})}});App.modules.notify("oembed.providers.register",{key:"Facebook",provider:c})};App.modules.exports("oembed-fb",{init:e})}(jQuery,window),function(a,b,c){"use strict";var d=function(){return!!window.instgrm&&window.instgrm.Embeds},e=function(){var b;App.modules.notify("oembed.providers.abstract",function(a,c){b=c});var e=a.extend({},b,{embed:function(a,e){var f=b.getTemplateContent(a);return f&&a.html(f),App.loaded(d,function(a){a.process()}),f?a.children():c}});App.modules.notify("oembed.providers.register",{key:"Instagram",provider:e})};App.modules.exports("oembed-ig",{init:e})}(jQuery,window),function(a,b,c){"use strict";var d=function(){var b;App.modules.notify("oembed.providers.abstract",function(a,c){b=c});var c=a.extend({},b,{embed:function(a,c){var d=b.getTemplateContent(a);return a.html(d),a.children()}});App.modules.notify("oembed.providers.register",{key:"Soundcloud",provider:c})};App.modules.exports("oembed-sc",{init:d})}(jQuery,window),function(a,b,c){"use strict";var d=function(){return!!window.twttr&&window.twttr.widgets},e=function(){var b;App.modules.notify("oembed.providers.abstract",function(a,c){b=c});var c=a.extend({},b,{embed:function(b,c){var e=b.find(".js-oembed-script"),f=a(a(e.contents()).text());b.append(f),App.loaded(d,function(a){a.load(f.get(0)||document)})}});App.modules.notify("oembed.providers.register",{key:"Twitter",provider:c})};App.modules.exports("oembed-tw",{init:e})}(jQuery,window),function(a,b,c){"use strict";var d=function(){return b.$f},e=function(){var e;App.modules.notify("oembed.providers.abstract",function(a,b){e=b});var f=a.extend({},e,{getIframe:function(a,b,d,f,g){return b=b!==c?b:1,d=d!==c?d:1,e.getIframe().attr("src","//player.vimeo.com/video/"+a+"?autoplay="+b+"&loop="+d+"&api=1&html5=1&rel="+f+(g||""))},ready:function(b,c){App.loaded(d,function(d){var e=d(a("iframe",b).get(0));e.addEvent("ready",function(){b.attr("data-volume")&&e.api("setVolume",parseInt(b.attr("data-volume"),10)),App.callback(c,[e])})})},play:function(b){App.loaded(d,function(c){var d=c(a("iframe",b).get(0));d.api("play")})},pause:function(c){App.loaded(d,function(d){var e=b.$f(a("iframe",c).get(0));e.api("pause")})},progress:function(c,e){App.loaded(d,function(d){var f=b.$f(a("iframe",c).get(0));f.addEvent("playProgress",function(a){App.callback(e,[100*a.percent])})})},finish:function(c,e){App.loaded(d,function(d){var f=b.$f(a("iframe",c).get(0));f.addEvent("finish",function(){App.callback(e,{container:c})})})},volume:function(c,e){App.loaded(d,function(d){var f=b.$f(a("iframe",c).get(0));
f.api("setVolume",e)})}});App.modules.notify("oembed.providers.register",{key:"Vimeo",provider:f})};App.modules.exports("oembed-vm",{init:e})}(jQuery,window),function(a,b,c){"use strict";var d=function(){return!!b.YT&&b.YT.Player},e=function(){var e;App.modules.notify("oembed.providers.abstract",function(a,b){e=b});var f=a.extend({},e,{getIframe:function(a,b,g,h,i){var j=a.indexOf("v=")>0?a.match(/v=([^\&]+)/im)[1]:a.substring(a.lastIndexOf("/")),k=b!==c?b:1,l=e.getIframe().attr("id","youtube-player-"+j).attr("src","//www.youtube.com/embed/"+j+"?feature=oembed&autoplay="+k+"&enablejsapi=1&version=3&html5=1&rel="+h+(i||""));return App.loaded(d,function(a){f.ytplayer=new a(l.get(0))}),l},playerLoaded:function(){return f.ytplayer&&f.ytplayer.playVideo},ready:function(a,b){App.loaded(d,function(a){App.callback(b,[a])})},play:function(a){App.loaded(d,function(a){App.loaded(f.playerLoaded,function(){f.ytplayer.playVideo()})})},pause:function(a){App.loaded(d,function(a){App.loaded(f.playerLoaded,function(){f.ytplayer.pauseVideo()})})},progress:function(a,c){var e=0,g=function(){if(clearTimeout(e),f.ytplayer){var a=f.ytplayer.getDuration(),b=f.ytplayer.getCurrentTime();App.callback(c,[Math.max(0,b/a*100||0)])}e=setTimeout(g,2e3)},h=function(a){a.data===b.YT.PlayerState.PLAYING?g():(clearTimeout(e),e=0)};App.loaded(d,function(a){App.loaded(f.playerLoaded,function(){f.ytplayer.addEventListener("onStateChange",h)})})},finish:function(a,c){var e=function(d){d.data===b.YT.PlayerState.ENDED&&App.callback(c,{container:a})};App.loaded(d,function(a){App.loaded(f.playerLoaded,function(){f.ytplayer.addEventListener("onStateChange",e)})})}});App.modules.notify("oembed.providers.register",{key:"YouTube",provider:f})};App.modules.exports("oembed-yt",{init:e})}(jQuery,window),function(a,b){"use strict";var c=function(a,b){b&&b.url?document.location=b.url:document.location=document.location},d=function(){return{pages:{failedtoparse:function(a,b){},loaderror:function(a,b){},loadfatalerror:function(a,b){c(a,b)}}}};App.modules.exports("page-load-errors",{actions:d})}(jQuery),function(a,b){"use strict";var c=.3,d=.05,e=500,f=300,g=150,h="page-loading",i="show",j="start",k="end",l=a(),m=a(),n=!1,o=0,p=0,q=0,r=function(a){return~~(100*a)+"%"},s=function(a){if(clearTimeout(q),n){var b=p+d;p=Math.max(b,a||p),p=Math.min(p,1),m.width(r(p)),!a&&p<1-d&&(q=setTimeout(s,g))}App.log({args:["Progress %s %s",a||"timer",p],me:"page-load"})},t=function(){clearTimeout(o),p=c,m.removeClass(k).removeClass(i).removeClass(j).width(r(0)).height(),m.addClass(j).addClass(i).width(r(p)).height(),l.addClass(h),n=!0,App.log({args:"Start",me:"page-load"}),setTimeout(s,f)},u=function(){m.addClass(k).width("100%"),n=!1,o=setTimeout(function(){m.removeClass(i),l.removeClass(h)},e),App.log({args:"End",me:"page-load"})},v=function(a,b){s(b.percent)},w=function(){return{pageLoad:{start:t,progress:v,end:u},pages:{loading:t,loadfatalerror:u,loadprogress:v,loaded:u,notfound:u}}},x=function(){l=a("html"),m=a("#load-progress")};App.modules.exports("page-load",{init:x,actions:w})}(jQuery),function(a,b){"use strict";var c=function(){return{pages:{notfound:function(a,b){b&&b.url&&b.url!==document.location.pathname&&(document.location=b.url)}}}};App.modules.exports("page-not-found",{actions:c})}(jQuery),function(a,b){"use strict";var c="popup-poped",d=".js-popup-bg",e="data-popup-reset-on-close",f=function(a,b){b.addClass("noanim"),App.modules.notify("changeState.update",{item:b,action:a,state:c}),b.height(),b.removeClass("noanim")},g=function(a,b){App.modules.notify("changeState.update",{item:b,action:a,state:c})},h=function(b,e){var h=a(e.popup),i=h.find(d),j=h.hasClass("is-"+c);f("off",h),App.callback(e.openCallback),j||(a.removeFromTransition(i.selector),i.transitionEnd(function(){App.callback(e.openedCallback,[{popup:h}])}),g("on",h))},i=function(b,h){var i=a(h.popup),j=i.find(d),k=i.hasClass("is-"+c);k&&(a.removeFromTransition(j.selector),j.transitionEnd(function(){i.filter("["+e+"]").length&&f("on",i),App.callback(h.closeCallback,[{popup:i}])}),g("off",i))},j=function(b,d){var e=a(d.popup).hasClass("is-"+c);e?i("",d):h("",d)},k=function(){return{popup:{open:h,close:i,toggle:j}}};App.modules.exports("popup",{actions:k})}(jQuery),function(a,b){"use strict";var c=function(){return{pages:{routeNotFound:function(a,b){b&&b.url&&b.url!==document.location.pathname&&(document.location=b.url)}}}};App.modules.exports("route-not-found",{actions:c})}(jQuery),function(a,b){"use strict";var c=(a(window),a("#site-loader"),a("html"),function(a){var b=new RegExp("[?&]"+a+"=([^&]*)").exec(window.location.search);return b&&decodeURIComponent(b[1].replace(/\+/g," "))}),d=function(a,b,c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="; expires="+d.toGMTString();document.cookie=a+"="+b+e+";path=/"},e=function(){var a=c("gclid");if(a){var b=c("gclsrc");b&&b.indexOf("aw")===-1||d("gclid",a,90)}},f=function(a,b){var c=new RegExp("(?:^|;\\s*)gclid=([^;]*)").exec(document.cookie);if(c){var d=c[1]?c[1]:"";b.input&&b.input.attr("value",d)}},g=function(){e()},h=function(){return{salesforceAdwords:{setId:f}}};App.modules.exports("salesforce-adwords",{init:g,actions:h})}(jQuery),function(a,b){"use strict";var c=(a(window),a("#site"),function(b,c,d){var e=document.location,f=e.protocol+"//"+e.host+e.pathname,g={service:"sharethis",title:document.title,url:f,type:"large"},h=a.extend(g,c);h.element&&window.stWidget&&window.stWidget.addEntry(h),a(h.element).on(App.device.events.click,function(a){return window.pd(a,!1)})}),d=function(){},e={shareThis:{applyButton:c}};App.modules.exports("shareThis",{init:d,actions:function(){return e}})}(jQuery),function(a,b,c){"use strict";var d=b.onerror,e=function(b,c,e,f,g){return b=b||"",c&&(b+=" "+c),e&&(b+=" line "+e),f&&(b+=" col "+f),g&&g.stack&&(b+=" col "+g.stack),a.sendEvent("error",b),App.callback(d,b,c,e,f,g)};b.onerror=e,a(document).ajaxError(function(b,c,d){a.sendEvent("error ajax",d.url,b.result)})}(jQuery,window),function(a,b){"use strict";var c=(a(window),".js-site-loader"),d=a(c),e=function(){a("html").removeClass("block-scroll"),App.modules.notify("siteLoader.finishing",{noDuration:!0})},f=function(){d.remove(),App.modules.notify("siteLoader.finished")},g=function(){App.modules.notify("siteLoader.closing"),d.length&&(a(".js-site-loader-close-ended-anim-ref").transitionEnd(f),App.modules.notify("changeState.update",{item:d,state:"close",action:"on"}),e())},h=function(){App.modules.notify("siteLoader.pageLoaded"),d.length&&setTimeout(g,1e3)},i=function(){App.modules.notify("siteLoader.initing"),App.debug()?(App.modules.notify("siteLoader.closing"),e(),f()):setTimeout(g,9500)},j=function(){return{site:{loaded:h}}};App.modules.exports("site-loader",{init:i,actions:j})}(jQuery),function(a,b){"use strict";var c=".js-site-nav-link",d="is-selected",e=a("#site"),f=function(b){var f=e.find(c+".btn-"+b);e.find(c+"."+d).not(f).each(function(){var b=a(this);App.modules.notify("changeState.update",{item:b,state:"selected",action:"off"})}),f.each(function(){var b=a(this);App.modules.notify("changeState.update",{item:b,state:"selected",action:"on"})})},g=function(b,c){a(c.page.key());f(c.page.key().substring(1))},h=function(){return{page:{entering:g}}};App.modules.exports("site-nav-link-selector",{actions:h})}(jQuery),function(a,b){"use strict";var c=a(window),d=a("#site"),e=!1,f=null,g=function(a,b){f=b,e=!0},h=function(a,b){b.state.scrollPos&&(c.scrollTop(b.state.scrollPos),App.mediator.notify("site.scroll"),App.mediator.notify("site.postscroll"))},i=function(){e&&(e=!1,h(null,f))},j=function(){history.scrollRestoration&&(history.scrollRestoration="manual"),d.on(a.click,"a[href^='#']",function(b){var c=document.location.pathname+document.location.search;return c+=a(this).attr("href"),App.mediator.goto(c),window.pd(b)})},k=function(){return{history:{popState:g},page:{enter:i}}};App.modules.exports("siteScrollKeeper",{init:j,actions:k})}(jQuery),function(a,b){"use strict";var c=a(window),d=a("html"),e=function(b){a(".js-fix-scroll-pad").css({paddingRight:b||""}),a(".js-fix-scroll-right").css({right:b||""}),a(".js-fix-scroll-margin").css({marginRight:b||""})},f=function(){d.removeClass("no-scroll"),e(0)},g=function(){if(!d.hasClass("no-scroll")){var a=c.width();d.addClass("no-scroll"),e(c.width()-a)}},h=function(){},i=function(){return{site:{removeScroll:g,addScroll:f}}};App.modules.exports("siteScroll",{init:h,actions:i})}(jQuery),function(a,b){"use strict";var c=(a(window),function(a,b,c,d){var e="is-"+b,f=a.hasClass(e),g=a.attr("data-"+b+"-state-slide-duration")||300,h=a.attr("data-"+b+"-state-notify-on-callback");if(d=d?d:{},"toggle"===c){App.modules.notify("changeState.update",{item:a,state:b,action:"toggle"});var i=f?"slideUp":"slideDown";a.stop(!0,!1)[i](g,function(){a.css({overflow:"",height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""}),"slideDown"===i&&h&&App.mediator.notify(h,{item:a})})}else"up"===c?f&&(App.modules.notify("changeState.update",{item:a,state:b,action:"off"}),a.stop(!0,!1).slideUp(g,function(){a.css({overflow:"",height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""})})):"down"===c?f||(App.modules.notify("changeState.update",{item:a,state:b,action:"on"}),a.stop(!0,!1).slideDown(g,function(){a.css({overflow:"",height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""}),App.mediator.notify(h,{item:a})})):App.log("Action: "+c+" is not recognized: Actions available are : toggle, up, down")}),d=function(a,b){if(b&&b.item&&b.state&&b.action){var d=b.item.attr("data-"+b.state+"-state-min-width"),e=b.item.attr("data-"+b.state+"-state-max-width"),f=!!d&&window.mediaQueryMinWidth(d)||!d,g=!!e&&window.mediaQueryMaxWidth(e)||!e;f&&g&&c(b.item,b.state,b.action,b.callbacks)}},e=function(){return{slide:{update:d}}};App.modules.exports("slide",{actions:e})}(jQuery),function(a,b){"use strict";var c=function(){a(".js-tab-reset").focus()},d=function(){return{page:{enter:c}}};App.modules.exports("tab-navigation",{actions:d})}(jQuery),function(a,b){"use strict";var c=(a(window),a("title",document),{}),d=function(){c[document.location.pathname]=a("title").text()},e=function(b,d,e){if(d.data){var f="";a(d.data).each(function(b,c){if(a(c).is("title"))return f=a(c).text(),!0}),d.url||(d.url=document.location.pathname),c[d.url]=f}},f=function(a,b,d){c[document.location.pathname]&&(document.title=c[document.location.pathname])},g={pages:{loaded:e},page:{enter:f},articleChanger:{loaded:e,enter:f}};App.modules.exports("titleUpdater",{init:d,actions:function(){return g}})}(jQuery),function(a,b){"use strict";var c=!0,d=function(){return c?"/"+a("html").attr("lang")+"/":"/"},e=function(a,b,c){App.mediator.goto(d())},f=function(){return{page:{toggleNoPreviousUrl:e}}},g=function(){};App.modules.exports("toggleNoPreviousUrl",{init:g,actions:f})}(jQuery),function(a,b){"use strict";var c=[],d="",e=function(b,c){var d=b.currentPage,e=b.nextPage,f=a(e.key()),g=a(d.key()),h=function(){App.modules.notify("page.entering",{page:e,route:b.route}),f.css({opacity:1,display:"block"}),g.css({display:"none"}),e.enter(b.enterNext),App.callback(c)};App.modules.notify("page.leaving",{page:d}),d.leave(b.leaveCurrent),h()},f=function(a){},g=function(a){for(var b=0;b<c.length;b++){var d=c[b];if(!(d.from!==a.currentPage.key().substring(1)&&"*"!==d.from||d.to!==a.nextPage.key().substring(1)&&"*"!==d.to)&&d.canAnimate(a))return d}},h=function(a,b){var c=f,e=g(b);e&&(c=e.beginTransition),d=b.nextPage.key().substring(1),c(b)},i=function(a,b,c){var f=e,h=g(b);h&&(f=h.transition),f(b,function(){d=""}),b.isHandled=!0},j=function(){return{pages:{requestPageTransition:i,requestBeginPageTransition:h},pageTransitionAnimation:{getTargetPage:function(a,b,c){b||(b={result:{}}),b.result||(b.result={}),b.result.pageTransitionAnimation={},b.result.pageTransitionAnimation.target=d}}}},k=function(b){var d=a.extend({from:"*",to:"*",beginTransition:f,transition:e,canAnimate:function(){return!0}},b);"*"===d.from&&"*"===d.to?(e=d.transition,f=d.beginTransition):c.push(d)};App.modules.exports("pageTransitionAnimation",{actions:j});window.App=a.extend(window.App,{transitions:{exports:k}})}(jQuery),function(a,b){"use strict";var c=(a(window),function(b,c){c&&c.item&&a.removeFromTransition(c.item.selector)}),d=function(a,b){if(b&&b.item){var c=b.item.attr("data-transitionEnd-notify");c&&c.length&&b.item.transitionEnd(function(){App.mediator.notify(c,{item:b.item})})}},e=function(){return{transitionEndNotify:{attach:d,cancel:c}}};App.modules.exports("transitionEnd-notify",{actions:e})}(jQuery),function(a,b){"use strict";var c="",d="",e="",f="",g={},h=!1,i=!1,j=["fr","en"],k=function(){var b=a("body"),c=0;return a.each(j,function(a,d){if(b.hasClass(d))return c=a,!1}),c},l=function(){var a=f.indexOf("?");g=a>-1?App.routing.querystring.parse(f.substring(a)):{}},m=function(b,c){var d={scrollPos:a(window).scrollTop()};window.history.replaceState(a.extend({},d,c.data),c.title,c.url)},n=function(){h||m(null,{title:document.title,url:d+f})},o=function(a){history.pushState({},document.title,a)},p=function(){o(d+f)},q=function(a){var b=a.page.routes()[0];return a.page.routes().length>1&&(b=a.page.routes()[k()]),b},r=function(a,b){var c=a?a.indexOf("*"):-1,d=function(){a=a.substring(0,c),b.length>a.length?(f=b.substring(c),l()):(f="",g={})},e=function(){if(b.length>a.length){var c=b[a.length];"#"!==c&&"?"!==c||(f=b.substring(a.length),l())}else f="",g={}};return c>-1?d():e(),a},s=function(a){var b=a;""===d&&(i=!0),""!==d&&(b+=f,h||o(a+f),h=!1)},t=function(a,b,f){var g=r(q(b),b.route);d!=g&&(s(g),d=g,e=b.route,c=b.page.key())},u=function(b,c,e){if(i){var g=window.location.href,h=window.location.protocol+"//"+window.location.host+d;f=g.substring(h.length),App.mediator.notify("page.fragmentChanged",f)}else a.sendPageView({page:c.route})},v=function(a,b,c){f="",l()},w=function(b,c,e){d&&(f=c,a.isPlainObject(c)&&l(),p(),a.sendPageView({page:c.route}))},x=function(){var b="";return a.each(g,function(a,c){c&&(b.length&&(b+="&"),b+=a+"="+c)}),b},y=function(b,c,d){if(a.isPlainObject(c.qs)){var e=App.routing.querystring.stringify(g);a.extend(g,c.qs);var h=f.split("#")[0],i=f.split("#")[1],j=f.indexOf("?"),k=x();"?"+k!==e&&(k.length?f=j===-1?h+"?"+k:h.substring(0,j+1)+k:j!==-1&&(f=h.split("?")[0]),i&&i.length&&(f+="#"+i),p(),c.raiseFragmentChanged&&App.mediator.notify("page.fragmentChanged",f))}},z=function(){var a=App.pages.page(window.location.pathname);if(a){var b=window.location;if(a.key()==c){b.origin||(b.origin=b.protocol+"//"+b.hostname);var g=b.origin+d,i=b.href.substring(g.length);f!=i?(App.mediator.notify("page.fragmentChanged",i),f=i,l()):App.mediator.notify("page.sameFragmentRequested",i)}else h=!0,App.mediator.goto(b.pathname+b.search,e)}else App.log({args:"Page not found",me:"Url Changer"})},A=function(b,c,d){var e=f;r(q(c),c.route),p(),f=e,z(),a.sendPageView({page:c.route})},B=_.throttle(function(){m(null,{title:document.title,url:document.location.pathname+document.location.search+document.location.hash})},500,{}),C=function(){B()},D=function(){var b=a("html"),c=b.attr("data-all-langs");c&&(j=c.split(",")),window.history.pushState?a(window).on("popstate",function(a){App.modules.notify("history.popState",{previousUrl:e,event:a,state:a.originalEvent.state}),z()}):App.log({fx:"error",msg:"Cannot update url : history api was not found"})},E=function(){return{site:{scroll:C},page:{entering:t,leaving:v,enter:u,updateUrlFragment:w,updateQsFragment:y,replaceState:m},pages:{navigateToCurrent:A,loading:n},url:{getUrl:function(){return window.location.pathname},getQueryString:function(){return window.location.search},getFullUrl:function(){return window.location.toString()}}}};App.modules.exports("urlChanger",{init:D,actions:E})}(jQuery),function(a,b){"use strict";var c=32,d=".js-user-id",e=window.Storage.local,f="auto-user-id",g="",h=function(){var a=0,b="";if(!window.Uint8Array||!window.crypto){for(a=0;a<c;++a)b+=(~~(1e4*Math.random())%255).toString(16);return b}var d=new window.Uint8Array(c);for(window.crypto.getRandomValues(d),a=0;a<d.length;++a)b+=d[a].toString(16);return b},i=function(){g=e.get(f)||"",g||(g=h(),e.set(f,g))},j=function(){g&&a(d).val(g)},k=function(){return{page:{enter:j},articleChanger:{enter:j}}};App.modules.exports("auto-cycle",{init:i,actions:k})}(jQuery),function(a,b){"use strict";var c=a(window),d=a(document),e=function(a,b){App.mediator.notify("site."+a,{event:b})},f=function(a){e("resize",a)},g=function(a){e("orientation",a),f()},h=function(a){e("scroll",a),e("postscroll",a)},i=function(a){e("loaded",a)},j=function(a){var b=document.visibilityState||document.webkitVisibilityState||"visible";e("visibilitychange",a,b)},k=function(a){e("ready",a)},l=function(){a(k),c.load(i).scroll(h).on("orientationchange",g),a.ios||c.resize(f),d.on("visibilitychange webkitvisibilitychange",j)},m=function(a,b){b&&b.animated||(c.scrollTop(0),h())},n=function(){return{window:{scrollTop:m}}};App.modules.exports("windowNotifier",{init:l,actions:n})}(jQuery),function(a,b){"use strict";var c=a(window),d=a("body"),e=(a("#site-pages"),350),f=!1,g=!1,h=null,i=function(b,c){var f=a("#bg-transition",d),g=b.currentPage,h=b.nextPage,i=a(h.key());a(g.key());g.leave(b.leaveCurrent,{canRemove:!0}),d.addClass(h.key().substring(1)),App.modules.notify("page.entering",{page:h,route:b.route}),i.ready(function(){i.css({opacity:1,display:"block"}),h.enter(b.enterNext),f.fadeOut(e).promise().then(function(){App.modules.notify("transition.end",{page:h,route:b.route})}),App.callback(c)})},j=function(b,j){var k=a("#bg-transition",d),l=b.currentPage,m=b.nextPage,n=(a(m.key()),a(l.key()));f=!1,g=!1,h=null,k.fadeIn(e).promise().then(function(){d.removeClass(l.key().substring(1)),App.modules.notify("page.leaving",{page:l,canRemove:!0}),c.scrollTop(0),n.hide(),f=!0,g&&i(h)})},k=function(a,b){g=!0,h=a,f&&i(a,b)};App.transitions.exports({beginTransition:j,transition:k,canAnimate:function(a){return!0}})}(jQuery),function(a,b){"use strict";a(window),a("body"),a("#site-pages"),a("#bg-transition"),a("#bg-transition-popup")}(jQuery),function(a,b,c){"use strict";App.pages.exports("default-detail-page",function(){var b,c=App.components.create("articleChanger"),d=function(a,c){c.canRemove&&b.remove(),App.callback(a)},e=function(a,b){var d=b?b:"";c.navigateTo(d.split("/")[0])},f=function(){b=a(this.key()),c.init(b,{startPageHandle:b.find(".js-article").attr("data-handle"),scrollToTop:!0})},g=function(){return{page:{fragmentChanged:e}}},h={init:f,leave:d,actions:g};return h})}(jQuery,window),function(a,b,c){"use strict";App.pages.exports("defaultPage",function(){var b,c=function(a){App.callback(a)},d=function(){b=a(this.key())},e=function(){return{}},f={init:d,enter:c,actions:e};return f})}(jQuery,window),function(a,b,c){"use strict";var d="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix,e=function(b){return~~(!b||a.isNumeric(b)?b||0:b)},f=function(b){return!b||a.isNumeric(b)?~~(b||0)+"px":b},g=function(a,b,c){a=f(a),b=f(b),c=f(c);var e=d?"3d(":"(",g=d?","+c+")":")";return"translate"+e+a+","+b+g},h=function(b,c,f,g){b=e(b),c=e(c),f=e(f),g=!g||a.isNumeric(g)?(g||0)+"deg":g;var h=d?"3d("+b+","+c+","+f+",":"Z(",i=")";return"rotate"+h+g+i};b.CSS3={translate:g,rotate:h,prefix:function(a,b){var c={};return c[a]=b,c["-webkit-"+a]=b,c["-moz-"+a]=b,c["-ms-"+a]=b,c["-o-"+a]=b,c}}}(jQuery,window),function(a,b){"use strict";var c="disabled";a.fn.disable=function(){return a(this).attr(c,c).addClass(c)},a.fn.enable=function(){return a(this).removeAttr(c).removeClass(c)}}(jQuery),function(a){"use strict";var b=a("html").attr("lang"),c=function(){var b=[];a.each(arguments,function(c,d){d=a.isPlainObject(d)?JSON.stringify(d,null,2):'"'+d+'"',b.push(d)}),App.log({args:["%cga("+b.join(",")+");","color:navy"]})},d=function(){return window.dataLayer&&window.dataLayer.push?function(c,d,e,f,g,h,i,j){if("pageview"===d)dataLayer.push(a.extend({},e,{event:d,page:{requestURI:e.page||e.location,page:e.page,location:e.location,language:b,referer:document.referrer,title:document.title}}));else if("event"===d){var k={event:d,eventCategory:j||e,eventAction:f,eventLabel:g,eventValue:h,eventOptions:i};a.isPlainObject(e)&&(k=a.extend(!0,{},k,e),k.eventCategory=k.eventCategory||k.event,k.event=d),dataLayer.push(k)}}:window.ga||c};a.sendPageView=function(b){var c=d(),e={page:window.location.pathname+window.location.search,location:window.location.href,hostname:window.location.hostname},f=b?a.extend(e,b):e;a.isFunction(a.formatPage)&&(f.page=a.formatPage(f.page)),a.isFunction(a.formatLocation)&&(f.location=a.formatLocation(f.location)),c("send","pageview",f)},a.sendEvent=function(a,b,c,e,f,g){var h=d();a=a||"",f=a.options||f||{nonInteraction:1},h("send","event",a,b,c,e,f,g)},a.fn.sendClickEvent=function(b){b=b||{};var c=a(this).eq(0),d=!0;b.action||(b.action="click"),b.label||(b.label=a.trim(c.text()));var e=a.extend({},b,{cat:c.attr("data-ga-cat")||void 0,category:c.attr("data-ga-category")||void 0,action:c.attr("data-ga-action")||void 0,label:c.attr("data-ga-label")||void 0,value:parseInt(c.attr("data-ga-value"),10)||void 0});return e.cat?(e.label||App.log({fx:"err",args:"No ga-label found. Reverting to text"}),b.event&&(b.event.gaHandled?d=!1:b.event.gaHandled=!0),void(d&&a.sendEvent(e.cat,e.action,e.label,e.value,void 0,e.category))):void App.log({fx:"err",args:"No ga-cat found. Cannot continue."})},a(function(){var b=window.location,c=b.origin||b.protocol+"//"+b.hostname,d=':not([href^="'+c+'"])',e='a[href^="http://"]'+d+', a[href^="https://"]'+d,f='a[href^="mailto:"]',g='a[href^="tel:"]',h=["pdf","jpg","jpeg","png","doc","docx","xsl","xslx"],i=_.map(h,function(a){return'a[href$=".'+a+'"], '}).join("")+'a[href$="?dl"], a[download]',j=":not([data-ga-cat])";a("#site").on(App.device.events.click,"[data-ga-cat]",function(b){a(this).sendClickEvent({event:b})}).on(App.device.events.click,e+j,function(b){a(this).sendClickEvent({cat:"link-external",event:b})}).on(App.device.events.click,i+j,function(b){a(this).sendClickEvent({cat:"link-download",event:b})}).on(App.device.events.click,f+j,function(b){a(this).sendClickEvent({cat:"link-mailto",event:b})}).on(App.device.events.click,g+j,function(b){a(this).sendClickEvent({cat:"link-tel",event:b})}),a("body").hasClass("page-404")&&a.sendEvent("erreur 404","erreur 404",document.referrer)})}(jQuery),function(a,b){"use strict";var c="transitionend webkitTransitionEnd oTransitionEnd mozTransitionEnd MSTransitionEnd",d="add-class-timer",e=[],f=function(b){e.length&&a.each(e,function(a,c){c&&b.call(this,c,a)})};window.App&&!window.App.debug()||(a.transitionsQueue=function(){return e}),a("body").on(c,function(b){var c=a(b.target);f(function(d,f){a.each(d.selectors,function(a,b){d.selectors[a]=b||c.is(a)}),window._.every(d.selectors)&&(e.splice(f,1),d.callback.call(d.context,b))})}),a.fn.transitionEnd=function(b,c){var d=a(this),f={selectors:{},callback:b,context:this,timestamp:a.now()};if(c&&!a.isArray(c)&&(c=[c]),c&&c.length)a.each(c,function(a,b){b?f.selectors[b]=!1:App.debug()&&console.warn("Element %s has no selector",a)});else{if(!d.selector)return App.debug()&&console.warn("Element %s has no selector",this),d;f.selectors[d.selector]=!1}return e.push(f),d},a.removeFromTransition=function(b){var c=!1;return b&&(a.isArray(b)||(b=[b]),f(function(d,f){var g=!1;if(d&&d.selectors){var h=function(c,d){return!!~a.inArray(d,b)};g=window._.some(d.selectors,h),g&&(e.splice(f,1),c=!0)}})),c},a.fn.addClasses=function(b,c,e,f){var g=a(this);return g.length?(f=f||[g.selector],g.each(function(g,h){var i=a(h),j=i.data(d);clearTimeout(j),i.addClass(b),j=setTimeout(function(c,d,e){i.hasClass(b)&&(a.isFunction(d)&&i.transitionEnd(d,e),i.addClass(c))},100,c,e,f),i.data(d,j)})):g},a.fn.removeClasses=function(b,c,d,e){var f=a(this);return f.length?(e=e||f.selector,f.each(function(f,g){var h=a(g);h.transitionEnd(function(){h.removeClass(b),a.isFunction(d)&&d()},e),h.removeClass(c)})):f}}(jQuery);
//# sourceMappingURL=framework-modules.min.js.map