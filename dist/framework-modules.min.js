/*! framework.js-modules - v0.4.3 - - build  - 2014-11-26
* https://github.com/DeuxHuitHuit/framework.js-modules
* Copyright (c) 2014 Deux Huit Huit; Licensed MIT */

!function(a){"use strict";var b=function(a,b,c){var d=function(){a.fadeTo(500,0,function(){a.hide(),b.fadeTo(500,1),c.articleEnter(a,b,c),setTimeout(function(){App.mediator.notify("articleChanger.entering")},100)})};a.length?d():(b.fadeTo(500,1),c.articleEnter(a,b,c))},c=function(a,b,c,d){var e=d.findArticle(b,c,d);return e.hide(),a.append(e),e},d=function(b,c,d){c=c||"";var e=d.articleSelector+(d.trackHandle?'[data-handle="'+c+'"]':"");return a(e,a(b))},e={articleSelector:".js-article",containerSelector:".js-article-ctn",findArticle:d,appendArticle:c,animToArticle:b,trackHandle:!0,articleEnter:function(a,b,c){c.trackHandle||a.remove(),App.modules.notify("articleChanger.enter")}};App.components.exports("articleChanger",function(){var b,c,d,f,g=function(f,g){c=f,b=a.extend({},e,g),d=a(b.containerSelector,c)},h=function(a,e){var g=b.findArticle(d,f,b),h=e||document.location.href,i=function(c){var e=b.appendArticle(d,c,a,b),f=document.location,h=f.href.substring(f.hostname.length+f.protocol.length+2);App.modules.notify("pageLoad.end"),App.modules.notify("articleChanger.entering",{url:h,data:c}),e.length?b.animToArticle(g,e,b):App.log({args:"Could not find new article",fx:"error",me:"Article Changer"})};if(!b.trackHandle||f!==a){var j;b.trackHandle&&(j=b.findArticle(d,a,b)),j&&j.length?b.animToArticle(g,j,b):(App.modules.notify("pageLoad.start",{page:c}),Loader.load({url:h,priority:0,vip:!0,success:i,progress:function(a){var b=a.originalEvent.total,c=a.originalEvent.loaded,d=b>0?c/b:0;App.mediator.notify("pageLoad.progress",{event:a,total:b,loaded:c,percent:d})},error:function(){App.modules.notify("article.loaderror"),App.modules.notify("pageLoad.end")},giveup:function(){App.modules.notify("pageLoad.end")}})),f=a}};return{init:g,clear:function(){f=""},navigateTo:h}})}(jQuery,window,document),function(a,b){"use strict";var c=350,d=function(d,e,f){if(d.length){var g=function(){d.fadeTo(c,0,function(){d.hide(),e.fadeTo(c,1),f.articleEnter(e)})};a.mobile?g():a.scrollTo(0,Math.min(500,a(b).scrollTop()),g)}else e.fadeTo(c,1),f.articleEnter(e)},e=function(a,b,c,d){var e=d.findArticle(b,c,d);e.hide(),a.append(e)},f=function(b,c,d){return c=c||"",a(d.articleSelector+'[data-handle="'+c+'"]',a(b))},g={articleSelector:".js-article",containerSelector:".js-article-ctn",findArticle:f,appendArticle:e,animToArticle:d,articleEnter:function(){App.modules.notify("articleChanger.enter")}};App.components.exports("articleChanger",function(){var b,c,d,e,f=function(e,f){c=e,b=a.extend({},g,f),d=a(b.containerSelector,c)},h=function(a){var f=b.findArticle(d,e,b),g=function(c){b.appendArticle(d,c,a,b);var e=b.findArticle(d,a,b);App.modules.notify("pageLoad.end"),App.modules.notify("articleChanger.entering"),e.length?b.animToArticle(f,e,b):App.log({args:["Could not find new article `%s`",a],fx:"error",me:"Article Changer"})};if(e!==a){var h=b.findArticle(d,a,b);if(h.length)b.animToArticle(f,h,b);else{var i="";App.modules.notify("url.getFullUrl",null,function(a,b){i=b}),App.modules.notify("pageLoad.start",{page:c}),Loader.load({url:i,priority:0,vip:!0,success:g,progress:function(a){var b=a.originalEvent.total,c=a.originalEvent.loaded,d=b>0?c/b:0;App.mediator.notify("pageLoad.progress",{event:a,total:b,loaded:c,percent:d})},error:function(){App.modules.notify("article.loaderror"),App.modules.notify("pageLoad.end")},giveup:function(){App.modules.notify("pageLoad.end")}})}e=a}};return{init:f,clear:function(){e=""},navigateTo:h}})}(jQuery,window,document),function(a){"use strict";App.components.exports("jplayer",function(b){var c,d={playerSelector:".js-jplayer-player",playerContainerSelector:".js-jplayer-container",onReady:null,onTimeupdate:null,backgroundColor:"transparent",loop:!0,width:1920,height:1080,resize:!0},e=a.extend({},d,b),f=function(){var b=c.find(e.playerContainerSelector);b.each(function(){var b=a(this);g(b)})},g=function(b){var c=b.find(e.playerSelector);c.jPlayer({ready:function(){var c=a(this);c.jPlayer("setMedia",{webmv:b.attr("data-video-webm"),m4v:b.attr("data-video-mp4"),ogv:b.attr("data-video-ogv")}),e.resize&&h(b),App.callback(e.onReady,[b])},solution:"html, flash",swfPath:"//cdnjs.cloudflare.com/ajax/libs/jplayer/2.5.4/",loop:e.loop,volume:0,supplied:"webmv, m4v, ogv",backgroundColor:e.backgroundColor,wmode:e.backgroundColor,size:{width:e.width,height:e.height},preload:e.preload||"none",play:function(){App.mediator.notify("jplayer.play",{ctn:b})},timeupdate:function(a){var c=a.jPlayer.status;c.currentTime&&App.mediator.notify("jplayer.timeupdate",{status:c,ctn:b}),App.callback(e.onTimeupdate,[b,c])},ended:function(){App.callback(e.onEnded,[b])}})},h=function(b){var c=b.width(),d=b.height(),f=b.find(e.playerSelector),g=a.sizing.aspectFill({width:c,height:d,preferWidth:!1},e.width/e.height),h=a.positioning.autoPosition({position:"center",left:"left",top:"top"},a.size(c,d),g);f.size(g).css(h).data({size:g,position:h}),f.jPlayer("option",{size:g})},i=function(){c.find(e.playerContainerSelector).each(function(){h(a(this))})},j=function(a){var b=a.find(e.playerSelector);b.jPlayer("destroy"),b.jPlayer("pauseOthers")},k=function(){c.find(e.playerContainerSelector).each(function(){var b=a(this);j(b),b.removeClass("video-loaded").closest(".video-loaded").removeClass("video-loaded")})},l=function(a){var b=a.find(e.playerSelector);b.jPlayer("pauseOthers"),b.jPlayer("play")},m=function(a){var b=a.find(e.playerSelector);b.jPlayer("pause")},n=function(a){var b=a.find(e.playerSelector);b.jPlayer("stop")},o=function(b){c=a(b)};return{init:o,loadAllVideo:f,loadVideo:g,destroyVideo:j,destroyAllVideo:k,playVideo:l,pauseVideo:m,stopVideo:n,resizeVideo:h,resizeAllVideo:i}})}(jQuery,jQuery(window)),function(a){"use strict";"fr"==a("html").attr("lang")&&(jQuery.timeago.settings.strings={prefixAgo:"Publié il y a",prefixFromNow:"d'ici",seconds:"moins d'une minute",minute:"environ une minute",minutes:"environ %d minutes",hour:"une heure",hours:"%d heures",day:"un jour",days:"%d jours",month:"un mois",months:"%d mois",year:"un an",years:"%d ans"}),App.components.exports("timeAgo",function(){var b,c=2592e6,d=function(d){b=d,a("time.js-time-ago").each(function(){var b=a(this),d=new Date(b.attr("datetime"));(new Date).getTime()-d.getTime()<c&&b.timeago()})};return{init:d}})}(jQuery,window,document),function(a){"use strict";{var b="#site a.js-alt-lg-link",c=(a(window),{}),d=function(){var b={};a("link[rel=alternate][hreflang]",document).each(function(){var c=a(this);b[c.attr("hreflang")]=c.attr("href")}),c[document.location.pathname]=b},e=function(b,d){if(d.data){var e={};a(d.data).each(function(b,c){if(a(c).is("link")){var d=a(c);d.attr("hreflang")&&(e[d.attr("hreflang")]=d.attr("href"))}return a(c).is("body")?!0:void 0}),c[d.url]=e}},f=function(){c[document.location.pathname]&&a(b).each(function(){var b=a(this),d=c[document.location.pathname][b.data("lg")];d&&b.attr("href",d)})},g={pages:{loaded:e},page:{enter:f}};App.modules.exports("altLanguageLinkUpdater",{init:d,actions:function(){return g}})}}(jQuery),function(a){"use strict";var b=(a(window),function(){a(".js-cycle:not(.cycle-inited)").each(function(){var b=a(this);if(!b.data("cycle-disable-mobile")||!a.mobile){var c={slides:b.attr("data-cycle-slides")||">img",pager:b.attr("data-cycle-pager")||"> .cycle-pager",next:b.attr("data-cycle-next")||"> .cycle-next",prev:b.attr("data-cycle-prev")||"> .cycle-prev",timeout:b.data("cycle-timeout")||4e3,paused:b.data("cycle-paused")||!1,pauseOnHover:b.data("cycle-pause-on-hover")||!1,fx:b.data("cycle-fx")||"fade",captionTemplate:b.attr("data-cycle-caption-template")||"",log:App.debug()};b.cycle(c),b.addClass("cycle-inited")}})}),c=function(){},d=function(){return{page:{enter:b},articleChanger:{enter:b}}};App.modules.exports("auto-cycle",{init:c,actions:d})}(jQuery),function(a){"use strict";{var b=!0,c=function(c,d){b||a(d.page.key()).find("img[data-src-format]").jitImage(),b=!1},d=function(){return{page:{enter:c}}};App.modules.exports("auto-jit-image",{actions:d})}}(jQuery,window),function(a){"use strict";var b,c,d=(a(window),function(){return a("> .page:visible",c)}),e=function(a){if(!a)return 1;var b=a.toString().split(/[:\/]/i);return b.length?1===b.length?parseFloat(b[0]):2===b.length?parseInt(b[0],10)/(parseInt(b[1],10)||1):-1:1},f=function(){App.mediator.notifyCurrentPage("autoRatio.resizeCompleted")},g=function(){h(a("*[data-auto-ratio]",d()),f)},h=function(b,c){b.each(function(){var b,c=a(this),d=e(c.attr("data-auto-ratio")),f=c.attr("data-auto-ratio-property")||"height";b="width"==f||"max-width"==f?c.height():c.width(),b=~~Math.floor(b/d),c.css(f,b+"px"),a("img[data-src-format]",c).jitImage()}),App.callback(c)},i=function(){g()},j=function(a,b){b&&b.elements?h(b.elements,b.callback?b.callback:f):g()},k=function(){b=a("#site"),c=a("#site-pages",b),g()},l=function(){return{site:{resize:g},page:{enter:i},autoRatioSize:{update:j},articleChanger:{enter:i}}};App.modules.exports("auto-ratio-size",{init:k,actions:l})}(jQuery),function(a){"use strict";var b=a(window),c=0,d=function(){return a(".page:visible")},e={all:!0,desktop:!a.mobile,tablette:a.tablette,mobile:a.mobile,phone:a.phone},f=function(b){var c=0;if(b){var d=b.split(",");a.each(d,function(b,d){c+=a(d).height()})}return c},g=function(b){var c=!1;if(b){var d=b.split(",");a.each(d,function(a,b){e[b]&&(c=!0)})}return c},h=function(){var c=a(this),d=c.attr("data-height-ratio")||1,e=c.attr("data-height-property")||"minHeight",h=f(c.attr("data-height-offset")),i=(b.height()-h)*d,j=g(c.attr("data-screen-height-platform")||"all"),k=c.attr("data-screen-height-min-width")||0;j&&b.width()>k?c.css(e,i):c.css(e,"")},i=function(){var e=d();(a.mobile&&Math.abs(c-b.height())>120||!a.mobile)&&(e.filter(".js-auto-screen-height").add(a(".js-auto-screen-height",e)).each(h),c=b.height())},j=function(){c=0,i(),a.mobile&&(c=b.height()),setTimeout(i,100)},k=function(){i(),a.mobile&&(c=b.height())},l=function(){return{site:{resize:i},page:{enter:j},autoScreenHeight:{update:i},articleChanger:{entering:i}}};App.modules.exports("auto-screen-height",{init:k,actions:l})}(jQuery),function(a){"use strict";var b=(a(window),a("#site"),function(){var a=document.location;return a.protocol+"//"+a.host+a.pathname}),c=function(a){App.modules.notify("shareThis.applyButton",{service:a.attr("data-share-service")||"sharethis",title:a.attr("data-share-title")||document.title,url:a.attr("data-share-url")||b(),type:a.attr("data-share-type")||"large",element:a.eq(0)[0]})},d=function(){a(".js-share-this-btn").each(function(){c(a(this))})},e={articleChanger:{enter:d},page:{enter:d}};App.modules.exports("autoShareThis",{init:function(){},actions:function(){return e}})}(jQuery),function(a){"use strict";a.fn.extend({blankLink:function(){a(this).each(function(){var b=a(this),c=b.attr("href");c&&(/^https?:\/\//.test(c)||/^\/workspace/.test(c))&&(b.attr("target")||b.attr("target","_blank"))})}});{var b=function(b,c){a("a",a(c.page.key())).blankLink()},c=function(){},d={page:{enter:b}};App.modules.exports("blankLinkModule",{init:c,actions:function(){return d}})}}(jQuery),function(a){"use strict";{var b=function(){return{site:{loaded:function(){a("link[data-href]").each(function(){var b=a(this);b.attr("href",b.attr("data-href"))})}}}};App.modules.exports("defered-css",{actions:b})}}(jQuery,window),function(a){"use strict";{var b=function(b,d){window.FB&&window.FB.XFBML&&(d=d||{},window.FB.XFBML.parse(d.elem||document,function(){c(b,{elem:d.elem||a(".page:visible",App.root())})}))},c=function(b,c){c&&c.elem.find(".fb-comments").each(function(b,c){var d=a(c),e=d.width();e>100&&d.attr("data-width",e).find(">span>iframe, >span:first-child").width(e)})},d=function(){return{page:{enter:b},FB:{parse:b,resize:c},articleChanger:{enter:b},site:{loaded:b}}};App.modules.exports("FB",{actions:d})}}(jQuery),function(a){"use strict";var b=function(a){return a.replace(/[a-z]+:\/\/([a-z0-9-_]+\.[a-z0-9-_:~\+#%&\?\/.=^>^<]+[^:\.,\)\s*$])/gi,function(a,b){return'<a title="'+a+'" href="'+a+'" target="_blank">'+(b.length>36?b.substr(0,35)+"&hellip;":b)+"</a>"})},c=function(a){return a.replace(/(^|[^\w]+)\@([a-zA-Z0-9_àáâãäåçèéêëìíîïðòóôõöùúûüýÿ]{1,15}(\/[a-zA-Z0-9-_àáâãäåçèéêëìíîïðòóôõöùúûüýÿ]+)*)/gi,function(a,b,c){return b+'<a href="http://twitter.com/'+c+'" target="_blank">@'+c+"</a>"})},d=function(a){return a.replace(/(^|[^&\w'"]+)\#([a-zA-Z0-9_àáâãäåçèéêëìíîïðòóôõöùúûüýÿ^"^<^>]+)/gi,function(a,b,c){return'"'===a.substr(-1)||"<"==a.substr(-1)?a:b+'<a href="https://twitter.com/search?q=%23'+c+'&src=hash" target="_blank">#'+c+"</a>"})};window.formatTwitter=function(){var e=a(this),f=e.html();"true"!==e.attr("data-formattwitter")&&(f=b(f),f=c(f),f=d(f),e.html(f),e.attr("data-formattwitter","true"))}}(jQuery),function(a){"use strict";{var b=function(b){var c=a(this),d=c.attr("href");return App.mediator._currentPage()?b.ctrlKey?void 0:(App.mediator.goto(d),window.pd(b)):!0},c=function(b){var c=a(this),d=c.attr("href"),e=c.attr("data-toggle-fallback-url");return App.mediator._currentPage()?(App.mediator.toggle(d,e),window.pd(b)):!0},d=function(){return{}},e=function(){var d='a[href^="/"]:not([href^="/workspace"]):not([data-action^="full"]):not([data-action^="toggle"]):not([data-action^="none"])';a("#site").on(a.click,d,b),a("#site").on(a.click,'a[href^="/"][data-action^="toggle"]',c)};App.modules.exports("links",{init:e,actions:d})}}(jQuery),function(a,b,c){"use strict";{var d={embed:function(a,b){var c=parseInt(a.attr("data-autoplay"),10),d="1"===a.attr("data-rel")?1:0,e=a.attr("data-extra"),f=this.getIframe(b,c,d,e);f.attr("width","100%"),f.attr("height","100%"),a.append(f)},getIframe:function(){return a('<iframe allowfullscreen="" />')},play:function(){},pause:function(){}},e=function(){return b.$f},f=function(){return b.YT?b.YT.Player:!1},g=a.extend({},d,{getIframe:function(a,b,e,f){return b=b!==c?b:1,d.getIframe().attr("src","//player.vimeo.com/video/"+a+"?autoplay="+b+"&api=1&html5=1&rel="+e+(f||""))},play:function(b){App.loaded(e,function(c){var d=c(a("iframe",b).get(0));d.api("play")})},pause:function(c){App.loaded(e,function(){var d=b.$f(a("iframe",c).get(0));d.api("pause")})}}),h=a.extend({},d,{getIframe:function(a,b,e,g){var i=a.indexOf("v=")>0?a.match(/v=([^\&]+)/im)[1]:a.substring(a.lastIndexOf("/")),j=b!==c?b:1,k=d.getIframe().attr("id","youtube-player-"+i).attr("src","//www.youtube.com/embed/"+i+"?feature=oembed&autoplay="+j+"&enablejsapi=1&version=3&html5=1&rel="+e+(g||""));return App.loaded(f,function(a){h._player=new a(k.get(0))}),k},play:function(){App.loaded(f,function(){this._player.playVideo()})},pause:function(){App.loaded(f,function(){this._player.pauseVideo()})}}),i={Vimeo:g,YouTube:h},j=function(a,b){var c=b.data("videoId"),d=i[b.data("videoProvider")];d?d.embed(b,c):App.log({args:["Provider `%s` not found.",d],me:"oEmbed",fx:"warn"})},k=function(a,b){var c=(b.data("videoId"),i[b.data("videoProvider")]);c?c.play(b):App.log({args:["Provider `%s` not found.",c],me:"oEmbed",fx:"warn"})},l=function(b,c){c.each(function(b,c){var d=a(c),e=d.data("videoId"),f=i[d.data("videoProvider")];f&&e&&d.find("iframe").length&&f.pause(d)})},m=function(c){var d=a(this),e=d.closest(".item-video"),f=a(".item-video-container",e);return j(null,f),d.fadeOut(),a(".item-video-container",e).fadeIn(),b.pd(c)},n=function(){a("#site").on(a.click,"a.play-button",m)},o={loadVideo:j,playVideo:k,pauseVideo:l};App.modules.exports("oEmbed",{init:n,actions:function(){return o}})}}(jQuery,window),function(a){"use strict";{var b=.4,c=.05,d=700,e="page-loading",f="show",g="start",h="end",i=a(),j=a(),k=!1,l=0,m=0,n=function(a){return 100*a+"%"},o=function(){clearTimeout(l),m=b,j.removeClass(h).removeClass(f).removeClass(g).width(n(0)).height(),j.addClass(g).addClass(f).width(n(m)).height(),i.addClass(e),k=!0,App.log({args:"Start",me:"page-load"})},p=function(){j.addClass(h).width("100%"),l=setTimeout(function(){j.removeClass(f),i.removeClass(e),k=!1},d),App.log({args:"End",me:"page-load"})},q=function(a){if(k){var b=m+c;m=Math.max(b,a),m=Math.min(m,1),j.width(n(m))}App.log({args:["Progress %s",a],me:"page-load"})},r=function(a,b){q(b.percent)},s=function(){return{pageLoad:{start:o,progress:q,end:p},pages:{loading:o,loadfatalerror:p,loadprogress:r,loaded:p,notfound:p}}},t=function(){i=a("html"),j=a("#load-progress")};App.modules.exports("page-load",{init:t,actions:s})}}(jQuery),function(){"use strict";{var a=function(){return{pages:{routeNotFound:function(a,b){b&&b.url&&b.url!==document.location.pathname&&(document.location=b.url)}}}};App.modules.exports("route-not-found",{actions:a})}}(jQuery),function(a){"use strict";{var b=(a(window),a("#site"),function(b,c){var d=document.location,e=d.protocol+"//"+d.host+d.pathname,f={service:"sharethis",title:document.title,url:e,type:"large"},g=a.extend(f,c);g.element&&window.stWidget&&window.stWidget.addEntry(g),a(g.element).on(a.click,function(a){return window.pd(a,!1)})}),c=function(){},d={shareThis:{applyButton:b}};App.modules.exports("shareThis",{init:c,actions:function(){return d}})}}(jQuery),function(a){"use strict";{var b=(a(window),a("title",document),{}),c=function(){b[document.location.pathname]=a("title").text()},d=function(c,d){if(d.data){var e="";a(d.data).each(function(b,c){return a(c).is("title")?(e=a(c).text(),!0):void 0}),d.url||(d.url=document.location.pathname),b[d.url]=e}},e=function(){b[document.location.pathname]&&(document.title=b[document.location.pathname])},f={pages:{loaded:d,internal:{loaded:d}},page:{enter:e,internal:{enter:e}}};App.modules.exports("titleUpdater",{init:c,actions:function(){return f}})}}(jQuery),function(a){"use strict";{var b=!0,c=function(){return b?"/"+a("html").attr("lang")+"/":"/"},d=function(){App.mediator.goto(c())},e=function(){return{page:{toggleNoPreviousUrl:d}}},f=function(){};App.modules.exports("toggleNoPreviousUrl",{init:f,actions:e})}}(jQuery),function(a){"use strict";{var b=[],c="",d=function(b,c){var d=b.currentPage,e=b.nextPage,f=a(e.key()),g=a(d.key()),h=function(){App.modules.notify("page.entering",{page:e,route:b.route}),f.css({opacity:1,display:"block"}),g.css({display:"none"}),e.enter(b.enterNext),App.callback(c)};App.modules.notify("page.leaving",{page:d}),d.leave(b.leaveCurrent),h()},e=function(){},f=function(a){for(var c=0;c<b.length;c++){var d=b[c];if(!(d.from!==a.currentPage.key().substring(1)&&"*"!==d.from||d.to!==a.nextPage.key().substring(1)&&"*"!==d.to)&&d.canAnimate(a))return d}},g=function(a,b){var d=e,g=f(b);g&&(d=g.beginTransition),c=b.nextPage.key().substring(1),d(b)},h=function(a,b){var e=d,g=f(b);g&&(e=g.transition),e(b,function(){c=""}),b.isHandled=!0},i=function(){return{pages:{requestPageTransition:h,requestBeginPageTransition:g},pageTransitionAnimation:{getTargetPage:function(a,b){b||(b={result:{}}),b.result||(b.result={}),b.result.pageTransitionAnimation={},b.result.pageTransitionAnimation.target=c}}}},j=function(){a(App.root()).append(a('<div id="bg-transition" ></div>'))},k=function(c){var f=a.extend({from:"*",to:"*",beginTransition:e,transition:d,canAnimate:function(){return!0}},c);"*"===f.from&&"*"===f.to?(d=f.transition,e=f.beginTransition):b.push(f)};App.modules.exports("pageTransitionAnimation",{init:j,actions:i})}window.App=a.extend(window.App,{transitions:{exports:k}})}(jQuery),function(a){"use strict";{var b=a(window),c="",d="",e="",f="",g={},h=function(){var e=window.location.pathname,g=!1,h=!1;return{urlChanged:function(){if(g)g=!1;else{var a=window.location.hash,b=a.length>1?a.substring(1):window.location.pathname+window.location.search,e=App.pages.page(b);if(e)if(e.key()==c){var i=d,j=b.substring(i.length);(f!=j||h)&&(App.mediator.notify("page.fragmentChanged",j),f=j)}else App.mediator.goto(b);else App.log({args:"Page not found",me:"Url Changer"})}},pageEntering:function(b){""===d?h=!0:(g=!0,b!=e?a.bbq.pushState("#"+b+f):a.bbq.pushState("#"))},pageEntered:function(){h&&b.trigger("hashchange")},updateUrlFragment:function(){var b=d+f;g=!0,"/"==d[d.length-1]&&"/"==f[0]&&(b=d+f.substring(1)),a.bbq.pushState("#"+b),g=!1},_getCurrentUrl:function(a){var b=window.location.hash;return b?b.replace(/#/gi,""):a},getFullUrl:function(){return this._getCurrentUrl(window.location.toString())},getCurrentUrl:function(){return this._getCurrentUrl(window.location.pathname).split("?")[0]},getQueryString:function(){var a=this.getFullUrl(),b=a.split("?"),c="";return b.length>1&&(b.shift(),c=b.join("?"),c&&0!==c.indexOf("?")&&(c+="?"+c)),c}}},i=function(){var a=!1,b=!1;return{urlChanged:function(){var b=App.pages.page(window.location.pathname);if(b){var g=window.location;if(b.key()==c){g.origin||(g.origin=g.protocol+"//"+g.hostname);var h=g.origin+d,i=g.href.substring(h.length);f!=i&&(App.mediator.notify("page.fragmentChanged",i),f=i)}else a=!0,App.mediator.goto(g.pathname+g.search,e)}else App.log({args:"Page not found",me:"Url Changer"})},pageEntering:function(c){var e=c;""===d&&(b=!0),""!==d&&(e+=f,a||history.pushState({},document.title,c+f),a=!1)},pageEntered:function(){if(b){var a=window.location.href,c=window.location.protocol+"//"+window.location.host+d;f=a.substring(c.length),App.mediator.notify("page.fragmentChanged",f)}},updateUrlFragment:function(){history.pushState({},document.title,d+f)},getCurrentUrl:function(){return window.location.pathname},getQueryString:function(){return window.location.search},getFullUrl:function(){return window.location.toString()}}},j={hash:h(),history:i()},k=j.hash,l=function(){return a("body").hasClass("fr")?0:1},m=function(a){return a.page.routes()[l()]},n=function(a,b){var c=a?a.indexOf("*"):-1;return c>-1&&(a=a.substring(0,c),b.length>a.length?(f=b.substring(c),o()):(f="",g={})),a},o=function(){var a=f.indexOf("?");g=a>-1?window.QueryStringParser.parse(f.substring(a)):{}},p=function(b,f){var g=n(m(f),f.route);d!=g&&(k.pageEntering(g),d=g,e=f.route,c=f.page.key(),a.sendPageView({page:f.route}))},q=function(){k.pageEntered()},r=function(){f="",o()},s=function(b,c){d&&(f=c,a.isPlainObject(c)&&o(),k.updateUrlFragment(),a.sendPageView({page:c.route}))},t=function(){var b="";return a.each(g,function(a,c){c&&(b.length&&(b+="&"),b+=a+"="+c)}),b},u=function(b,c){if(a.isPlainObject(c)){a.extend(g,c);var d=f.indexOf("?"),e=t();e!==f&&(e.length?-1===d?f+="?"+e:f=f.substring(0,d+1)+e:f="",k.updateUrlFragment(),a.sendPageView({page:c.route}))}},v=function(b,c){var d=f;n(m(c),c.route),k.updateUrlFragment(),f=d,o(),k.urlChanged(),a.sendPageView({page:c.route})},w=function(){k.urlChanged()},x=function(){return k.getCurrentUrl()},y=function(){return k.getQueryString()},z=function(){return k.getFullUrl()},A=function(){window.history.pushState?(k=j.history,b.on("popstate",w)):a.bbq?(k=j.hash,b.on("hashchange",w)):App.log({fx:"error",msg:"Cannot update url : history api and bbq are not found"})},B=function(){return{page:{entering:p,leaving:r,enter:q,updateUrlFragment:s,updateQsFragment:u},pages:{navigateToCurrent:v},url:{getUrl:x,getQueryString:y,getFullUrl:z}}};App.modules.exports("urlChanger",{init:A,actions:B})}}(jQuery),function(a){"use strict";{var b=a(window),c=a(document),d=function(a,b){App.mediator.notify("site."+a,{event:b})},e=function(a){d("resize",a)},f=function(a){d("scroll",a)},g=function(a){d("loaded",a)},h=function(a){var b=document.visibilityState||document.webkitVisibilityState||"visible";d("visibilitychange",a,b)},i=function(){b.load(g).resize(e).scroll(f),c.on("visibilitychange webkitvisibilitychange",h)};App.modules.exports("windowNotifier",{init:i})}}(jQuery),function(a){"use strict";var b=a(window),c=a("body"),d=a("#site-pages"),e=350,f=function(f,g){var h=f.currentPage,i=f.nextPage,j=a(i.key()),k=a(h.key()),l=function(){App.modules.notify("page.entering",{page:i,route:f.route}),j.ready(function(){j.css({opacity:1,display:"block"}),c.addClass(i.key().substring(1)),d.animate({opacity:1},e,function(){App.modules.notify("transition.end",{page:i,route:f.route})}),i.enter(f.enterNext),App.callback(g)})},m=function(){d.animate({opacity:0},e,function(){c.removeClass(h.key().substring(1)),App.modules.notify("page.leaving",{page:h}),a.mobile&&b.scrollTop(0),h.leave(f.leaveCurrent),k.hide(),l()})};a.mobile?m():a.scrollTo(0,{duration:Math.min(1200,a(window).scrollTop()),easing:"easeInOutQuad",onAfter:m})};App.transitions.exports({transition:f,canAnimate:function(){return!0}})}(jQuery),function(){"use strict";App.pages.exports("defaultPage",function(){var a=function(a){App.callback(a)},b=function(){},c={init:b,enter:a};return c})}(jQuery,window),function(a,b){"use strict";var c="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix,d=function(b,d,e){b=!b||a.isNumeric(b)?(b||0)+"px":b,d=!d||a.isNumeric(d)?(d||0)+"px":d,e=!e||a.isNumeric(e)?(e||0)+"px":e;var f=c?"3d(":"(",g=c?","+e+")":")";return"translate"+f+b+","+d+g},e=function(b,d,e,f){b=!b||a.isNumeric(b)?b||0:b,d=!d||a.isNumeric(d)?d||0:d,e=!e||a.isNumeric(e)?e||0:e,f=!f||a.isNumeric(f)?(f||0)+"deg":f;var g=c?"3d("+b+","+d+","+e+",":"Z(",h=c?")":")";return"rotate"+g+f+h};b.CSS3={translate:d,rotate:e,prefix:function(a,b){var c={};return c[a]=b,c["-webkit-"+a]=b,c["-moz-"+a]=b,c["-ms-"+a]=b,c["-o-"+a]=b,c}}}(jQuery,window),function(a){"use strict";var b="disabled";a.fn.disable=function(){return a(this).attr(b,b).addClass(b)},a.fn.enable=function(){return a(this).removeAttr(b).removeClass(b)}}(jQuery),function(a){"use strict";var b=function(){var b=[];a.each(arguments,function(c,d){d=a.isPlainObject(d)?JSON.stringify(d,null,2):'"'+d+'"',b.push(d)}),App.log("ga("+b.join(",")+");")};a.sendPageView=function(c){var d=window.ga||b,e={page:window.location.pathname+window.location.search,location:window.location.href,hostname:window.location.hostname},f=c?a.extend(e,c):e;d("send","pageview",f)},a.sendEvent=function(a,c,d){var e=window.ga||b;e("send","event",a,c,d)},a.fn.sendClickEvent=function(b){var c=a(this).eq(0),d=c.attr("data-ga-value"),e=c.attr("data-ga-cat"),f=a.extend({},b,{cat:e?e:"click",event:"click",value:d?d:c.text()});d||App.log("No ga-value found, reverting to text"),a.sendEvent(f.cat,f.event,f.value)},a(function(){a("#site").on(a.click,"*[data-ga-value]",function(){a(this).sendClickEvent()})})}(jQuery),function(a){"use strict";var b=function(b){var c=function(){var c=a(this),d=!1,e=a.extend({},a.dropdownmenu.defaults,{popup:c.attr("data-popup"),items:c.attr("data-items"),background:c.attr("data-background"),click:a.click||"click"},b);e.popup=a(e.popup),e.background=a(e.background),e.items=e.popup.find(e.items);var f=function(){d||(h(),e.background.addClasses(e.showClass,e.popupClass),e.popup.addClasses(e.showClass,e.popupClass),d=!0,a.isFunction(e.menuPoped)&&e.menuPoped.call(c,e),c.trigger("menuPoped",[e]))},g=function(){d&&(e.background.removeClasses(e.showClass,e.popupClass),e.popup.removeClasses(e.showClass,e.popupClass),d=!1)},h=function(){var a=c.offset();e.popup.css(a)};c.on(e.click,function(a){return f(),window.pd(a,!0)}),e.items.on(e.click,function(){var b=a(this);e.items.removeClass(e.selectedClass),b.addClass(e.selectedClass),a.isFunction(e.selectionChanged)?e.selectionChanged.call(c,b,e):c.text(b.text()),c.trigger("selectionChanged",[b,e]),g()}),e.background.on(e.click,function(a){return g(),window.pd(a,!0)}),a(window).resize(function(){d&&h()})};return c};a.fn.dropdownmenu=function(c){var d=a(this);return d.each(b(c))},a.dropdownmenu={defaults:{popup:null,items:">*",background:null,showClass:"show",popupClass:"popup",selectedClass:"selected",selectionChanged:null,menuPoped:null}}}(jQuery),function(a){"use strict";var b="transitionend webkitTransitionEnd oTransitionEnd mozTransitionEnd MSTransitionEnd",c="add-class-timer",d=[],e=function(b){d.length&&a.each(d,function(a,c){c&&b.call(this,c,a)})};(!window.App||window.App.debug())&&(a.transitionsQueue=function(){return d}),a("body").on(b,function(b){var c=a(b.target);e(function(e,f){a.each(e.selectors,function(a,b){e.selectors[a]=b||c.is(a)}),_.every(e.selectors)&&(d.splice(f,1),e.callback.call(e.context,b))})}),a.fn.transitionEnd=function(b,c){var e=a(this),f={selectors:{},callback:b,context:this,timestamp:a.now()};if(c&&!a.isArray(c)&&(c=[c]),c&&c.length)a.each(c,function(a,b){b?f.selectors[b]=!1:App.debug()&&console.warn("Element %s has no selector",a)});else{if(!e.selector)return App.debug()&&console.warn("Element %s has no selector",this),e;f.selectors[e.selector]=!1}return d.push(f),e},a.removeFromTransition=function(b){var c=!1;return b&&(a.isArray(b)||(b=[b]),e(function(e,f){var g=!1;if(e&&e.selectors){var h=function(c,d){return!!~a.inArray(d,b)};g=_.some(e.selectors,h),g&&(d.splice(f,1),c=!0)}})),c},a.fn.addClasses=function(b,d,e,f){var g=a(this);return g.length?(f=f||[g.selector],g.each(function(g,h){var i=a(h),j=i.data(c);clearTimeout(j),i.addClass(b),j=setTimeout(function(c,d,e){i.hasClass(b)&&(a.isFunction(d)&&i.transitionEnd(d,e),i.addClass(c))},100,d,e,f),i.data(c,j)})):g},a.fn.removeClasses=function(b,c,d,e){var f=a(this);return f.length?(e=e||f.selector,f.each(function(f,g){var h=a(g);h.transitionEnd(function(){h.removeClass(b),a.isFunction(d)&&d()},e),h.removeClass(c)})):f}}(jQuery),function(a,b){"use strict";var c=function(a,b){try{window.localStorage[a]=""+b}catch(c){App.log(c)}},d=function(a){try{return window.localStorage[a]}catch(b){return App.log(b),null}},e=function(a,b){try{var e=d(a);e?e+=" "+b:e=""+b,b&&c(a,e)}catch(f){App.log(f)}},f=function(a,b){setTimeout(function(){e(a,b)},16)};b.storage={val:function(a,b){return b&&c(a,b),d(a)},put:e,async:{put:f}}}(jQuery,App);
//# sourceMappingURL=framework-modules.map