/*! framework.js-modules - v0.5.0 - - build  - 2015-05-15
* https://github.com/DeuxHuitHuit/framework.js-modules
* Copyright (c) 2015 Deux Huit Huit; Licensed MIT */

!function(a,b,c,d){"use strict";var e=function(a,b,c){var d=function(){a.fadeTo(500,0,function(){a.hide(),b.fadeTo(500,1),c.articleEnter(a,b,c),setTimeout(function(){App.mediator.notify("articleChanger.entering")},100)})};a.length?d():(b.fadeTo(500,1),c.articleEnter(a,b,c))},f=function(a,b,c,d){var e=d.findArticle(b,c,d);return e.hide(),a.append(e),e},g=function(b,c,d){c=c||"";var e=d.articleSelector+(d.trackHandle?'[data-handle="'+c+'"]':"");return a(e,a(b))},h={articleSelector:".js-article",containerSelector:".js-article-ctn",findArticle:g,appendArticle:f,animToArticle:e,trackHandle:!0,articleEnter:function(a,b,c){c.trackHandle||a.remove(),App.modules.notify("articleChanger.enter")}};App.components.exports("articleChanger",function(){var b,c,d,e,f=function(f,g){c=f,b=a.extend({},h,g),d=a(b.containerSelector,c),e=b.startPageHandle},g=function(a,f){var g=b.findArticle(d,e,b),h=f||document.location.href,i=function(c,e,f){var h=b.appendArticle(d,c,a,b),i=document.location,j=i.href.substring(i.hostname.length+i.protocol.length+2);App.modules.notify("pageLoad.end"),App.modules.notify("articleChanger.entering",{url:j,data:c}),h.length?b.animToArticle(g,h,b):App.log({args:"Could not find new article",fx:"error",me:"Article Changer"})};if(!b.trackHandle||e!==a){var j;b.trackHandle&&(j=b.findArticle(d,a,b)),j&&j.length?b.animToArticle(g,j,b):(App.modules.notify("pageLoad.start",{page:c}),Loader.load({url:h,priority:0,vip:!0,success:i,progress:function(a){var b=a.originalEvent.total,c=a.originalEvent.loaded,d=b>0?c/b:0;App.mediator.notify("pageLoad.progress",{event:a,total:b,loaded:c,percent:d})},error:function(){App.modules.notify("article.loaderror"),App.modules.notify("pageLoad.end")},giveup:function(a){App.modules.notify("pageLoad.end")}})),e=a}};return{init:f,clear:function(){e=""},navigateTo:g}})}(jQuery,window,document),function(a,b,c,d){"use strict";var e=350,f=function(c,d,f){if(c.length){var g=function(){c.fadeTo(e,0,function(){c.hide(),d.fadeTo(e,1),f.articleEnter(d)})};a.mobile?g():a.scrollTo(0,Math.min(500,a(b).scrollTop()),g)}else d.fadeTo(e,1),f.articleEnter(d)},g=function(a,b,c,d){var e=d.findArticle(b,c,d);e.hide(),a.append(e)},h=function(b,c,d){return c=c||"",a(d.articleSelector+'[data-handle="'+c+'"]',a(b))},i={articleSelector:".js-article",containerSelector:".js-article-ctn",findArticle:h,appendArticle:g,animToArticle:f,articleEnter:function(){App.modules.notify("articleChanger.enter")}};App.components.exports("articleChanger",function(){var b,c,d,e,f=function(e,f){c=e,b=a.extend({},i,f),d=a(b.containerSelector,c)},g=function(a){var f=b.findArticle(d,e,b),g=function(c,e,g){b.appendArticle(d,c,a,b);var h=b.findArticle(d,a,b);App.modules.notify("pageLoad.end"),App.modules.notify("articleChanger.entering"),h.length?b.animToArticle(f,h,b):App.log({args:["Could not find new article `%s`",a],fx:"error",me:"Article Changer"})};if(e!==a){var h=b.findArticle(d,a,b);if(h.length)b.animToArticle(f,h,b);else{var i="";App.modules.notify("url.getFullUrl",null,function(a,b){i=b}),App.modules.notify("pageLoad.start",{page:c}),Loader.load({url:i,priority:0,vip:!0,success:g,progress:function(a){var b=a.originalEvent.total,c=a.originalEvent.loaded,d=b>0?c/b:0;App.mediator.notify("pageLoad.progress",{event:a,total:b,loaded:c,percent:d})},error:function(){App.modules.notify("article.loaderror"),App.modules.notify("pageLoad.end")},giveup:function(a){App.modules.notify("pageLoad.end")}})}e=a}};return{init:f,clear:function(){e=""},navigateTo:g}})}(jQuery,window,document),function(a,b,c,d){"use strict";App.components.exports("googleMap",function(b){var d,e,f,g=[],h={defaultMarkerOptions:{},mapTypeId:google.maps.MapTypeId.ROADMAP,markerAction:function(){var a=new google.maps.LatLng(this.getPosition().lat()+.005,this.getPosition().lng());e.panTo(a),k(),this.infowindow.open(e,this),f=this}},i=a.extend({},h,b),j=function(b){var c=a.extend({},i.defaultMarkerOptions,b),d=new google.maps.Marker({position:c.LatLng,map:e,icon:new google.maps.MarkerImage("/workspace/assets/img/gmap-pin.png",new google.maps.Size(24,42),new google.maps.Point(0,0),new google.maps.Point(12,42)),shadow:c.iconShadow,zIndex:c.zIndex});g.push(d),c.content&&c.content.length?(d.infowindow=new google.maps.InfoWindow({content:c.content}),google.maps.event.addListener(d,"click",i.markerAction)):i.markerCustomAction&&google.maps.event.addListener(d,"click",i.markerCustomAction)},k=function(){f&&f.infowindow.close()},l=function(){e=new google.maps.Map(d.get(0),i),google.maps.event.addListener(e,"bounds_changed",function(){App.mediator.notifyCurrentPage("map.boundsChanged",e.getBounds())})},m=function(){return!!c.google&&!!google.maps&&!!google.maps.Map},n=function(){d.hasClass("map-loaded")||(l(),d.addClass("map-loaded"))},o=function(b,c){d=a(c,b),App.loaded(m,function(){n()})};return{init:o,addMarker:j,center:function(a,b){e.panTo(new google.maps.LatLng(a,b))},closeAllPopup:k}})}(jQuery,jQuery(window),window),function(a,b,c){"use strict";App.components.exports("jplayer",function(b){var c,d={playerSelector:".js-jplayer-player",playerContainerSelector:".js-jplayer-container",onReady:null,onTimeupdate:null,backgroundColor:"transparent",loop:!0,width:1920,height:1080,resize:!0},e=a.extend({},d,b),f=function(){var b=c.find(e.playerContainerSelector);b.each(function(){var b=a(this);g(b)})},g=function(b){var c=b.find(e.playerSelector);c.jPlayer({ready:function(){var c=a(this);c.jPlayer("setMedia",{webmv:b.attr("data-video-webm"),m4v:b.attr("data-video-mp4"),ogv:b.attr("data-video-ogv")}),e.resize&&h(b),App.callback(e.onReady,[b])},solution:"html, flash",swfPath:"//cdnjs.cloudflare.com/ajax/libs/jplayer/2.5.4/",loop:e.loop,volume:0,supplied:"webmv, m4v, ogv",backgroundColor:e.backgroundColor,wmode:e.backgroundColor,size:{width:e.width,height:e.height},preload:e.preload||"none",play:function(a){App.mediator.notify("jplayer.play",{ctn:b})},timeupdate:function(a){var c=a.jPlayer.status;c.currentTime&&App.mediator.notify("jplayer.timeupdate",{status:c,ctn:b}),App.callback(e.onTimeupdate,[b,c])},ended:function(){App.callback(e.onEnded,[b])}})},h=function(b){var c=b.width(),d=b.height(),f=b.find(e.playerSelector),g=a.sizing.aspectFill({width:c,height:d,preferWidth:!1},e.width/e.height),h=a.positioning.autoPosition({position:"center",left:"left",top:"top"},a.size(c,d),g);f.size(g).css(h).data({size:g,position:h}),f.jPlayer("option",{size:g})},i=function(){c.find(e.playerContainerSelector).each(function(){h(a(this))})},j=function(a){var b=a.find(e.playerSelector);b.jPlayer("destroy"),b.jPlayer("pauseOthers")},k=function(){c.find(e.playerContainerSelector).each(function(){var b=a(this);j(b),b.removeClass("video-loaded").closest(".video-loaded").removeClass("video-loaded")})},l=function(a){var b=a.find(e.playerSelector);b.jPlayer("pauseOthers"),b.jPlayer("play")},m=function(a){var b=a.find(e.playerSelector);b.jPlayer("pause")},n=function(a){var b=a.find(e.playerSelector);b.jPlayer("stop")},o=function(b){c=a(b)};return{init:o,loadAllVideo:f,loadVideo:g,destroyVideo:j,destroyAllVideo:k,playVideo:l,pauseVideo:m,stopVideo:n,resizeVideo:h,resizeAllVideo:i}})}(jQuery,jQuery(window)),function(a,b,c,d){"use strict";"fr"==a("html").attr("lang")&&(jQuery.timeago.settings.strings={prefixAgo:"Publié il y a",prefixFromNow:"d'ici",seconds:"moins d'une minute",minute:"environ une minute",minutes:"environ %d minutes",hour:"une heure",hours:"%d heures",day:"un jour",days:"%d jours",month:"un mois",months:"%d mois",year:"un an",years:"%d ans"}),App.components.exports("timeAgo",function(){var b,c=2592e6,d=function(d){b=d,a("time.js-time-ago").each(function(b,d){var e=a(this),f=new Date(e.attr("datetime"));(new Date).getTime()-f.getTime()<c&&e.timeago()})};return{init:d}})}(jQuery,window,document),function(a,b){"use strict";var c="#site a.js-alt-lg-link",d=(a(window),{}),e=function(){var b={};a("link[rel=alternate][hreflang]",document).each(function(){var c=a(this);b[c.attr("hreflang")]=c.attr("href")}),d[document.location.pathname]=b},f=function(b,c,e){if(c.data){var f={};a(c.data).each(function(b,c){if(a(c).is("link")){var d=a(c);d.attr("hreflang")&&(f[d.attr("hreflang")]=d.attr("href"))}return a(c).is("body")?!0:void 0}),d[c.url]=f}},g=function(b,e,f){d[document.location.pathname]&&a(c).each(function(){var b=a(this),c=d[document.location.pathname][b.data("lg")];c&&b.attr("href",c)})},h={pages:{loaded:f},page:{enter:g}};App.modules.exports("altLanguageLinkUpdater",{init:e,actions:function(){return h}})}(jQuery),function(a,b){"use strict";var c=(a(window),function(b,c){a(".js-cycle:not(.cycle-inited)").each(function(){var b=a(this);if(!b.data("cycle-disable-mobile")||!a.mobile){var c={slides:b.attr("data-cycle-slides")||">img",pager:b.attr("data-cycle-pager")||"> .cycle-pager",pagerTemplate:b.attr("data-cycle-pager-template")||"<span><span>",next:b.attr("data-cycle-next")||"> .cycle-next",prev:b.attr("data-cycle-prev")||"> .cycle-prev",timeout:b.attr("data-cycle-timeout")||4e3,paused:b.attr("data-cycle-paused")||!1,pauseOnHover:b.attr("data-cycle-pause-on-hover")||!1,fx:b.attr("data-cycle-fx")||"fade",captionTemplate:b.attr("data-cycle-caption-template")||"",log:App.debug()};b.cycle(c),b.addClass("cycle-inited")}})}),d=function(){},e=function(){return{page:{enter:c},articleChanger:{enter:c}}};App.modules.exports("auto-cycle",{init:d,actions:e})}(jQuery),function(a,b,c){"use strict";var d=!0,e=function(b,c){d||a(c.page.key()).find("img[data-src-format]").jitImage(),d=!1},f=function(){return{page:{enter:e}}};App.modules.exports("auto-jit-image",{actions:f})}(jQuery,window),function(a,b){"use strict";var c,d,e=(a(window),function(){return a("> .page:visible",d)}),f=function(a){if(!a)return 1;var b=a.toString().split(/[:\/]/i);return b.length?1===b.length?parseFloat(b[0]):2===b.length?parseInt(b[0],10)/(parseInt(b[1],10)||1):-1:1},g=function(){App.mediator.notifyCurrentPage("autoRatio.resizeCompleted")},h=function(){i(a("*[data-auto-ratio]",e()),g)},i=function(b,c){b.each(function(){var b,c=a(this),d=f(c.attr("data-auto-ratio")),e=c.attr("data-auto-ratio-property")||"height";b="width"==e||"max-width"==e?c.height():c.width(),b=~~Math.floor(b/d),c.css(e,b+"px"),a("img[data-src-format]",c).jitImage()}),App.callback(c)},j=function(){h()},k=function(a,b){b&&b.elements?i(b.elements,b.callback?b.callback:g):h()},l=function(){c=a("#site"),d=a("#site-pages",c),h()},m=function(){return{site:{resize:h},page:{enter:j},autoRatioSize:{update:k},articleChanger:{enter:j}}};App.modules.exports("auto-ratio-size",{init:l,actions:m})}(jQuery),function(a,b){"use strict";var c=a(window),d=0,e=function(){return a(".page:visible")},f={all:!0,desktop:!a.mobile,tablette:a.tablette,mobile:a.mobile,phone:a.phone},g=function(b){var c=0;if(b){var d=b.split(",");a.each(d,function(b,d){c+=a(d).height()})}return c},h=function(b){var c=!1;if(b){var d=b.split(",");a.each(d,function(a,b){f[b]&&(c=!0)})}return c},i=function(){var b=a(this),d=b.attr("data-height-ratio")||1,e=b.attr("data-height-property")||"minHeight",f=g(b.attr("data-height-offset")),i=(c.height()-f)*d,j=h(b.attr("data-screen-height-platform")||"all"),k=b.attr("data-screen-height-min-width")||0,l=b.data("data-screen-height-use-media-query")||!0,m=b.attr("data-screen-height-jitimage")||!0;j&&!l&&c.width()>k?b.css(e,i):j&&l&&window.matchMedia("(min-width: "+k+"px)").matches?b.css(e,i):b.css(e,""),m&&a("img[data-src-format]",b).jitImage()},j=function(b){var f=e();(a.mobile&&Math.abs(d-c.height())>120||!a.mobile)&&(f.filter(".js-auto-screen-height").add(a(".js-auto-screen-height",f)).each(i),d=c.height())},k=function(){d=0,j(),a.mobile&&(d=c.height()),setTimeout(j,100)},l=function(){j(),a.mobile&&(d=c.height())},m=function(){return{site:{resize:j},page:{enter:k},autoScreenHeight:{update:j},articleChanger:{entering:j}}};App.modules.exports("auto-screen-height",{init:l,actions:m})}(jQuery),function(a,b){"use strict";var c=(a(window),a("#site"),function(){var a=document.location;return a.protocol+"//"+a.host+a.pathname}),d=function(a){App.modules.notify("shareThis.applyButton",{service:a.attr("data-share-service")||"sharethis",title:a.attr("data-share-title")||document.title,url:a.attr("data-share-url")||c(),type:a.attr("data-share-type")||"large",element:a.eq(0)[0]})},e=function(b,c){a(".js-share-this-btn").each(function(){d(a(this))})},f={articleChanger:{enter:e},page:{enter:e}};App.modules.exports("autoShareThis",{init:function(){},actions:function(){return f}})}(jQuery),function(a,b){"use strict";a.fn.extend({blankLink:function(){a(this).each(function(){var b=a(this),c=b.attr("href");c&&(/^https?:\/\//.test(c)||/^\/workspace/.test(c))&&(b.attr("target")||b.attr("target","_blank"))})}});var c=function(b,c,d){a("a",a(c.page.key())).blankLink()},d=function(){},e={page:{enter:c}};App.modules.exports("blankLinkModule",{init:d,actions:function(){return e}})}(jQuery),function(a,b,c){"use strict";var d=function(){return{site:{loaded:function(){a("link[data-href]").each(function(){var b=a(this);b.attr("href",b.attr("data-href"))})}}}};App.modules.exports("defered-css",{actions:d})}(jQuery,window),function(a,b){"use strict";var c=function(b,c){window.FB&&window.FB.XFBML&&(c=c||{},window.FB.XFBML.parse(c.elem||document,function(){d(b,{elem:c.elem||a(".page:visible",App.root())})}))},d=function(b,c){c&&c.elem.find(".fb-comments").each(function(b,c){var d=a(c),e=d.width();e>100&&d.attr("data-width",e).find(">span>iframe, >span:first-child").width(e)})},e=function(){return{page:{enter:c},FB:{parse:c,resize:d},articleChanger:{enter:c},site:{loaded:c}}};App.modules.exports("FB",{actions:e})}(jQuery),function(a,b){"use strict";var c=function(a){return a.replace(/[a-z]+:\/\/([a-z0-9-_]+\.[a-z0-9-_:~\+#%&\?\/.=^>^<]+[^:\.,\)\s*$])/gi,function(a,b){return'<a title="'+a+'" href="'+a+'" target="_blank">'+(b.length>36?b.substr(0,35)+"&hellip;":b)+"</a>"})},d=function(a){return a.replace(/(^|[^\w]+)\@([a-zA-Z0-9_àáâãäåçèéêëìíîïðòóôõöùúûüýÿ]{1,15}(\/[a-zA-Z0-9-_àáâãäåçèéêëìíîïðòóôõöùúûüýÿ]+)*)/gi,function(a,b,c){return b+'<a href="http://twitter.com/'+c+'" target="_blank">@'+c+"</a>"})},e=function(a){return a.replace(/(^|[^&\w'"]+)\#([a-zA-Z0-9_àáâãäåçèéêëìíîïðòóôõöùúûüýÿ^"^<^>]+)/gi,function(a,b,c){return'"'===a.substr(-1)||"<"==a.substr(-1)?a:b+'<a href="https://twitter.com/search?q=%23'+c+'&src=hash" target="_blank">#'+c+"</a>"})};window.formatTwitter=function(){var b=a(this),f=b.html();"true"!==b.attr("data-formattwitter")&&(f=c(f),f=d(f),f=e(f),b.html(f),b.attr("data-formattwitter","true"))}}(jQuery),function(a,b){"use strict";var c=function(b){var c=a(this),d=c.attr("href");return App.mediator._currentPage()?b.ctrlKey?void 0:(App.mediator["goto"](d),window.pd(b)):!0},d=function(b){var c=a(this),d=c.attr("href"),e=c.attr("data-toggle-fallback-url");return App.mediator._currentPage()?(App.mediator.toggle(d,e),window.pd(b)):!0},e=function(){return{}},f=function(){var b='a[href^="/"]:not([href^="/workspace"]):not([data-action^="full"]):not([data-action^="toggle"]):not([data-action^="none"])';a("#site").on(a.click,b,c),a("#site").on(a.click,'a[href^="/"][data-action^="toggle"]',d)};App.modules.exports("links",{init:f,actions:e})}(jQuery),function(a,b,c){"use strict";var d={embed:function(a,b){var c=parseInt(a.attr("data-autoplay"),10),d="1"===a.attr("data-rel")?1:0,e=a.attr("data-extra"),f=this.getIframe(b,c,d,e);f.attr("width","100%"),f.attr("height","100%"),f.attr("frameborder","0"),a.append(f)},getIframe:function(b){return a('<iframe allowfullscreen="" />')},play:function(a){},pause:function(a){}},e=function(){return b.$f},f=function(){return b.YT?b.YT.Player:!1},g=a.extend({},d,{getIframe:function(a,b,e,f){return b=b!==c?b:1,d.getIframe().attr("src","//player.vimeo.com/video/"+a+"?autoplay="+b+"&api=1&html5=1&rel="+e+(f||""))},play:function(b){App.loaded(e,function(c){var d=c(a("iframe",b).get(0));d.api("play")})},pause:function(c){App.loaded(e,function(d){var e=b.$f(a("iframe",c).get(0));e.api("pause")})}}),h=a.extend({},d,{getIframe:function(a,b,e,g){var i=a.indexOf("v=")>0?a.match(/v=([^\&]+)/im)[1]:a.substring(a.lastIndexOf("/")),j=b!==c?b:1,k=d.getIframe().attr("id","youtube-player-"+i).attr("src","//www.youtube.com/embed/"+i+"?feature=oembed&autoplay="+j+"&enablejsapi=1&version=3&html5=1&rel="+e+(g||""));return App.loaded(f,function(a){h._player=new a(k.get(0))}),k},play:function(a){App.loaded(f,function(a){this._player.playVideo()})},pause:function(a){App.loaded(f,function(a){this._player.pauseVideo()})}}),i={Vimeo:g,YouTube:h},j=function(a,b){var c=b.data("videoId"),d=i[b.data("videoProvider")];d?d.embed(b,c):App.log({args:["Provider `%s` not found.",d],me:"oEmbed",fx:"warn"})},k=function(a,b){var c=(b.data("videoId"),i[b.data("videoProvider")]);c?c.play(b):App.log({args:["Provider `%s` not found.",c],me:"oEmbed",fx:"warn"})},l=function(b,c){c.each(function(b,c){var d=a(c),e=d.data("videoId"),f=i[d.data("videoProvider")];f&&e&&d.find("iframe").length&&f.pause(d)})},m=function(c){var d=a(this),e=d.closest(".item-video"),f=a(".item-video-container",e);return j(null,f),d.fadeOut(),a(".item-video-container",e).fadeIn(),b.pd(c)},n=function(){a("#site").on(a.click,"a.play-button",m)},o={loadVideo:j,playVideo:k,pauseVideo:l};App.modules.exports("oEmbed",{init:n,actions:function(){return o}})}(jQuery,window),function(a,b){"use strict";var c=.3,d=.05,e=500,f=300,g=150,h="page-loading",i="show",j="start",k="end",l=a(),m=a(),n=!1,o=0,p=0,q=0,r=function(a){return~~(100*a)+"%"},s=function(){clearTimeout(o),p=c,m.removeClass(k).removeClass(i).removeClass(j).width(r(0)).height(),m.addClass(j).addClass(i).width(r(p)).height(),l.addClass(h),n=!0,App.log({args:"Start",me:"page-load"}),setTimeout(u,f)},t=function(){m.addClass(k).width("100%"),n=!1,o=setTimeout(function(){m.removeClass(i),l.removeClass(h)},e),App.log({args:"End",me:"page-load"})},u=function(a){if(clearTimeout(q),n){var b=p+d;p=Math.max(b,a||p),p=Math.min(p,1),m.width(r(p)),!a&&1-d>p&&(q=setTimeout(u,g))}App.log({args:["Progress %s %s",a||"timer",p],me:"page-load"})},v=function(a,b){u(b.percent)},w=function(){return{pageLoad:{start:s,progress:v,end:t},pages:{loading:s,loadfatalerror:t,loadprogress:v,loaded:t,notfound:t}}},x=function(){l=a("html"),m=a("#load-progress")};App.modules.exports("page-load",{init:x,actions:w})}(jQuery),function(a,b){"use strict";var c=function(){return{pages:{routeNotFound:function(a,b){b&&b.url&&b.url!==document.location.pathname&&(document.location=b.url)}}}};App.modules.exports("route-not-found",{actions:c})}(jQuery),function(a,b){"use strict";var c=(a(window),a("#site"),function(b,c,d){var e=document.location,f=e.protocol+"//"+e.host+e.pathname,g={service:"sharethis",title:document.title,url:f,type:"large"},h=a.extend(g,c);h.element&&window.stWidget&&window.stWidget.addEntry(h),a(h.element).on(a.click,function(a){return window.pd(a,!1)})}),d=function(){},e={shareThis:{applyButton:c}};App.modules.exports("shareThis",{init:d,actions:function(){return e}})}(jQuery),function(a,b,c){"use strict";var d=b.onerror,e=function(b,c,e,f,g){return b=b||"",c&&(b+=" "+c),e&&(b+=" line "+e),f&&(b+=" col "+f),g&&g.stack&&(b+=" col "+g.stack),a.sendEvent("error",b),App.callback(d,b,c,e,f,g)};b.onerror=e,a(document).ajaxError(function(b,c,d){a.sendEvent("error ajax",d.url,b.result)})}(jQuery,window),function(a,b){"use strict";var c=(a(window),a("title",document),{}),d=function(){c[document.location.pathname]=a("title").text()},e=function(b,d,e){if(d.data){var f="";a(d.data).each(function(b,c){return a(c).is("title")?(f=a(c).text(),!0):void 0}),d.url||(d.url=document.location.pathname),c[d.url]=f}},f=function(a,b,d){c[document.location.pathname]&&(document.title=c[document.location.pathname])},g={pages:{loaded:e,internal:{loaded:e}},page:{enter:f,internal:{enter:f}}};App.modules.exports("titleUpdater",{init:d,actions:function(){return g}})}(jQuery),function(a,b){"use strict";var c=!0,d=function(){return c?"/"+a("html").attr("lang")+"/":"/"},e=function(a,b,c){App.mediator["goto"](d())},f=function(){return{page:{toggleNoPreviousUrl:e}}},g=function(){};App.modules.exports("toggleNoPreviousUrl",{init:g,actions:f})}(jQuery),function(a,b){"use strict";var c=[],d="",e=function(b,c){var d=b.currentPage,e=b.nextPage,f=a(e.key()),g=a(d.key()),h=function(){App.modules.notify("page.entering",{page:e,route:b.route}),f.css({opacity:1,display:"block"}),g.css({display:"none"}),e.enter(b.enterNext),App.callback(c)};App.modules.notify("page.leaving",{page:d}),d.leave(b.leaveCurrent),h()},f=function(a){},g=function(a){for(var b=0;b<c.length;b++){var d=c[b];if(!(d.from!==a.currentPage.key().substring(1)&&"*"!==d.from||d.to!==a.nextPage.key().substring(1)&&"*"!==d.to)&&d.canAnimate(a))return d}},h=function(a,b){var c=f,e=g(b);e&&(c=e.beginTransition),d=b.nextPage.key().substring(1),c(b)},i=function(a,b,c){var f=e,h=g(b);h&&(f=h.transition),f(b,function(){d=""}),b.isHandled=!0},j=function(){return{pages:{requestPageTransition:i,requestBeginPageTransition:h},pageTransitionAnimation:{getTargetPage:function(a,b,c){b||(b={result:{}}),b.result||(b.result={}),b.result.pageTransitionAnimation={},b.result.pageTransitionAnimation.target=d}}}},k=function(){a(App.root()).append(a('<div id="bg-transition" ></div>'))},l=function(b){var d=a.extend({from:"*",to:"*",beginTransition:f,transition:e,canAnimate:function(){return!0}},b);"*"===d.from&&"*"===d.to?(e=d.transition,f=d.beginTransition):c.push(d)};App.modules.exports("pageTransitionAnimation",{init:k,actions:j});window.App=a.extend(window.App,{transitions:{exports:l}})}(jQuery),function(a,b){"use strict";var c=a(window),d="",e="",f="",g="",h={},i=function(){var b=window.location.pathname,f=!1,h=!1;return{urlChanged:function(){if(f)f=!1;else{var a=window.location.hash,b=a.length>1?a.substring(1):window.location.pathname+window.location.search,c=App.pages.page(b);if(c)if(c.key()==d){var i=e,j=b.substring(i.length);(g!=j||h)&&(App.mediator.notify("page.fragmentChanged",j),g=j)}else App.mediator["goto"](b);else App.log({args:"Page not found",me:"Url Changer"})}},pageEntering:function(c){""===e?h=!0:(f=!0,a.bbq.pushState(c!=b?"#"+c+g:"#"))},pageEntered:function(){h&&c.trigger("hashchange")},updateUrlFragment:function(){var b=e+g;f=!0,"/"==e[e.length-1]&&"/"==g[0]&&(b=e+g.substring(1)),a.bbq.pushState("#"+b),f=!1},_getCurrentUrl:function(a){var b=window.location.hash;return b?b.replace(/#/gi,""):a},getFullUrl:function(){return this._getCurrentUrl(window.location.toString())},getCurrentUrl:function(){return this._getCurrentUrl(window.location.pathname).split("?")[0]},getQueryString:function(){var a=this.getFullUrl(),b=a.split("?"),c="";return b.length>1&&(b.shift(),c=b.join("?"),c&&0!==c.indexOf("?")&&(c+="?"+c)),c}}},j=function(){var a=!1,b=!1;return{urlChanged:function(){var b=App.pages.page(window.location.pathname);if(b){var c=window.location;if(b.key()==d){c.origin||(c.origin=c.protocol+"//"+c.hostname);var h=c.origin+e,i=c.href.substring(h.length);g!=i&&(App.mediator.notify("page.fragmentChanged",i),g=i)}else a=!0,App.mediator["goto"](c.pathname+c.search,f)}else App.log({args:"Page not found",me:"Url Changer"})},pageEntering:function(c){var d=c;""===e&&(b=!0),""!==e&&(d+=g,a||history.pushState({},document.title,c+g),a=!1)},pageEntered:function(){if(b){var a=window.location.href,c=window.location.protocol+"//"+window.location.host+e;g=a.substring(c.length),App.mediator.notify("page.fragmentChanged",g)}},updateUrlFragment:function(){history.pushState({},document.title,e+g)},getCurrentUrl:function(){return window.location.pathname},getQueryString:function(){return window.location.search},getFullUrl:function(){return window.location.toString()}}},k={hash:i(),history:j()},l=k.hash,m=function(){return a("body").hasClass("fr")?0:1},n=function(a){return a.page.routes()[m()]},o=function(a,b){var c=a?a.indexOf("*"):-1;return c>-1&&(a=a.substring(0,c),b.length>a.length?(g=b.substring(c),p()):(g="",h={})),a},p=function(){var a=g.indexOf("?");h=a>-1?window.QueryStringParser.parse(g.substring(a)):{}},q=function(b,c,g){var h=o(n(c),c.route);e!=h&&(l.pageEntering(h),e=h,f=c.route,d=c.page.key(),a.sendPageView({page:c.route}))},r=function(a,b,c){l.pageEntered()},s=function(a,b,c){g="",p()},t=function(b,c,d){e&&(g=c,a.isPlainObject(c)&&p(),l.updateUrlFragment(),a.sendPageView({page:c.route}))},u=function(){var b="";return a.each(h,function(a,c){c&&(b.length&&(b+="&"),b+=a+"="+c)}),b},v=function(b,c,d){if(a.isPlainObject(c)){a.extend(h,c);var e=g.indexOf("?"),f=u();f!==g&&(f.length?-1===e?g+="?"+f:g=g.substring(0,e+1)+f:g="",l.updateUrlFragment(),a.sendPageView({page:c.route}))}},w=function(b,c,d){var e=g;o(n(c),c.route),l.updateUrlFragment(),g=e,p(),l.urlChanged(),a.sendPageView({page:c.route})},x=function(){l.urlChanged()},y=function(){return l.getCurrentUrl()},z=function(){return l.getQueryString()},A=function(){return l.getFullUrl()},B=function(){window.history.pushState?(l=k.history,c.on("popstate",x)):a.bbq?(l=k.hash,c.on("hashchange",x)):App.log({fx:"error",msg:"Cannot update url : history api and bbq are not found"})},C=function(){return{page:{entering:q,leaving:s,enter:r,updateUrlFragment:t,updateQsFragment:v},pages:{navigateToCurrent:w},url:{getUrl:y,getQueryString:z,getFullUrl:A}}};App.modules.exports("urlChanger",{init:B,actions:C})}(jQuery),function(a,b){"use strict";var c=a(window),d=a(document),e=function(a,b){App.mediator.notify("site."+a,{event:b})},f=function(a){e("resize",a)},g=function(a){e("orientation",a),f()},h=function(a){e("scroll",a),e("postscroll",a)},i=function(a){e("loaded",a)},j=function(a){var b=document.visibilityState||document.webkitVisibilityState||"visible";e("visibilitychange",a,b)},k=function(){c.load(i).scroll(h).on("orientationchange",g),a.mobile||c.resize(f),d.on("visibilitychange webkitvisibilitychange",j)};App.modules.exports("windowNotifier",{init:k})}(jQuery),function(a,b){"use strict";var c=a(window),d=a("body"),e=(a("#site-pages"),350),f=!1,g=!1,h=null,i=a("#bg-transition",d),j=function(a,b){g=!0,h=a,f&&k(a,b)},k=function(b,c){var f=b.currentPage,g=b.nextPage,h=a(g.key());a(f.key());d.addClass(g.key().substring(1)),App.modules.notify("page.entering",{page:g,route:b.route}),h.ready(function(){h.css({opacity:1,display:"block"}),g.enter(b.enterNext),i.fadeOut(e).promise().then(function(){App.modules.notify("transition.end",{page:g,route:b.route})}),App.callback(c)})},l=function(b,j){var l=b.currentPage,m=b.nextPage,n=(a(m.key()),a(l.key()));f=!1,g=!1,h=null,i.fadeIn(e).promise().then(function(){d.removeClass(l.key().substring(1)),App.modules.notify("page.leaving",{page:l}),c.scrollTop(0),l.leave(b.leaveCurrent),n.hide(),f=!0,g&&k(h)})};App.transitions.exports({beginTransition:l,transition:j,canAnimate:function(a){return!0}})}(jQuery),function(a,b,c){"use strict";App.pages.exports("defaultPage",function(){var b,c=function(a){App.callback(a)},d=function(){b=a(this.key())},e=function(){return{}},f={init:d,enter:c,actions:e};return f})}(jQuery,window),function(a,b,c){"use strict";var d="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix,e=function(b,c,e){b=!b||a.isNumeric(b)?(b||0)+"px":b,c=!c||a.isNumeric(c)?(c||0)+"px":c,e=!e||a.isNumeric(e)?(e||0)+"px":e;var f=d?"3d(":"(",g=d?","+e+")":")";return"translate"+f+b+","+c+g},f=function(b,c,e,f){b=!b||a.isNumeric(b)?b||0:b,c=!c||a.isNumeric(c)?c||0:c,e=!e||a.isNumeric(e)?e||0:e,f=!f||a.isNumeric(f)?(f||0)+"deg":f;var g=d?"3d("+b+","+c+","+e+",":"Z(",h=")";return"rotate"+g+f+h};b.CSS3={translate:e,rotate:f,prefix:function(a,b){var c={};return c[a]=b,c["-webkit-"+a]=b,c["-moz-"+a]=b,c["-ms-"+a]=b,c["-o-"+a]=b,c}}}(jQuery,window),function(a,b){"use strict";var c="disabled";a.fn.disable=function(){return a(this).attr(c,c).addClass(c)},a.fn.enable=function(){return a(this).removeAttr(c).removeClass(c)}}(jQuery),function(a){"use strict";var b=function(){var b=[];a.each(arguments,function(c,d){d=a.isPlainObject(d)?JSON.stringify(d,null,2):'"'+d+'"',b.push(d)}),App.log({args:["%cga("+b.join(",")+");","color:red"]})};a.sendPageView=function(c){var d=window.ga||b,e={page:window.location.pathname+window.location.search,location:window.location.href,hostname:window.location.hostname},f=c?a.extend(e,c):e;d("send","pageview",f)},a.sendEvent=function(a,c,d,e,f){var g=window.ga||b;g("send","event",a,c,d,e,f||{nonInteraction:1})},a.fn.sendClickEvent=function(b){var c=a(this).eq(0),d=c.attr("data-ga-value"),e=c.attr("data-ga-cat"),f=a.extend({},b,{cat:e?e:"click",event:"click",value:d?d:c.text()});d||App.log("No ga-value found, reverting to text"),a.sendEvent(f.cat,f.event,"click-event",f.value)},a(function(){a("#site").on(a.click,"*[data-ga-value]",function(b){a(this).sendClickEvent()})})}(jQuery),function(a,b){"use strict";var c=function(b){var c=function(c){var d=a(this),e=!1,f=a.extend({},a.dropdownmenu.defaults,{popup:d.attr("data-popup"),items:d.attr("data-items"),background:d.attr("data-background"),click:a.click||"click"},b);f.popup=a(f.popup),f.background=a(f.background),f.items=f.popup.find(f.items);var g=function(){e||(i(),f.background.addClasses(f.showClass,f.popupClass),f.popup.addClasses(f.showClass,f.popupClass),e=!0,a.isFunction(f.menuPoped)&&f.menuPoped.call(d,f),d.trigger("menuPoped",[f]))},h=function(){e&&(f.background.removeClasses(f.showClass,f.popupClass),f.popup.removeClasses(f.showClass,f.popupClass),e=!1)},i=function(){var a=d.offset();f.popup.css(a)};d.on(f.click,function(a){return g(),window.pd(a,!0)}),f.items.on(f.click,function(b){var c=a(this);f.items.removeClass(f.selectedClass),c.addClass(f.selectedClass),a.isFunction(f.selectionChanged)?f.selectionChanged.call(d,c,f):d.text(c.text()),d.trigger("selectionChanged",[c,f]),h()}),f.background.on(f.click,function(a){return h(),window.pd(a,!0)}),a(window).resize(function(a){e&&i()})};return c};a.fn.dropdownmenu=function(b){var d=a(this);return d.each(c(b))},a.dropdownmenu={defaults:{popup:null,items:">*",background:null,showClass:"show",popupClass:"popup",selectedClass:"selected",selectionChanged:null,menuPoped:null}}}(jQuery),function(a,b){"use strict";var c="transitionend webkitTransitionEnd oTransitionEnd mozTransitionEnd MSTransitionEnd",d="add-class-timer",e=[],f=function(b){e.length&&a.each(e,function(a,c){c&&b.call(this,c,a)})};(!window.App||window.App.debug())&&(a.transitionsQueue=function(){return e}),a("body").on(c,function(b){var c=a(b.target);f(function(d,f){a.each(d.selectors,function(a,b){d.selectors[a]=b||c.is(a)}),_.every(d.selectors)&&(e.splice(f,1),d.callback.call(d.context,b))})}),a.fn.transitionEnd=function(b,c){var d=a(this),f={selectors:{},callback:b,context:this,timestamp:a.now()};if(c&&!a.isArray(c)&&(c=[c]),c&&c.length)a.each(c,function(a,b){b?f.selectors[b]=!1:App.debug()&&console.warn("Element %s has no selector",a)});else{if(!d.selector)return App.debug()&&console.warn("Element %s has no selector",this),d;f.selectors[d.selector]=!1}return e.push(f),d},a.removeFromTransition=function(b){var c=!1;return b&&(a.isArray(b)||(b=[b]),f(function(d,f){var g=!1;if(d&&d.selectors){var h=function(c,d){return!!~a.inArray(d,b)};g=_.some(d.selectors,h),g&&(e.splice(f,1),c=!0)}})),c},a.fn.addClasses=function(b,c,e,f){var g=a(this);return g.length?(f=f||[g.selector],g.each(function(g,h){var i=a(h),j=i.data(d);clearTimeout(j),i.addClass(b),j=setTimeout(function(c,d,e){i.hasClass(b)&&(a.isFunction(d)&&i.transitionEnd(d,e),i.addClass(c))},100,c,e,f),i.data(d,j)})):g},a.fn.removeClasses=function(b,c,d,e){var f=a(this);return f.length?(e=e||f.selector,f.each(function(f,g){var h=a(g);h.transitionEnd(function(){h.removeClass(b),a.isFunction(d)&&d()},e),h.removeClass(c)})):f}}(jQuery);
//# sourceMappingURL=framework-modules.min.js.map